{
  "version": 3,
  "file": "circular-pipelines.js",
  "sourceRoot": "../..",
  "sources": [
    "src/experiments/circular-pipelines.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\n############################################################################################################\nPATH                      = require 'path'\nFS                        = require 'fs'\n#...........................................................................................................\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'MKTS/EXPERIMENTS/CIRCULAR-PIPELINES'\nlog                       = CND.get_logger 'plain',     badge\ninfo                      = CND.get_logger 'info',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\nalert                     = CND.get_logger 'alert',     badge\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\nhelp                      = CND.get_logger 'help',      badge\nurge                      = CND.get_logger 'urge',      badge\necho                      = CND.echo.bind CND\n# #...........................................................................................................\n# suspend                   = require 'coffeenode-suspend'\n# step                      = suspend.step\n#...........................................................................................................\n# D                         = require 'pipedreams'\n# $                         = D.remit.bind D\n# $async                    = D.remit_async.bind D\nPS                        = require 'pipestreams'\n{ $, $async, }            = PS\nassign                    = Object.assign\nafter                     = ( dts, f ) -> setTimeout f, dts * 1000\ndefer                     = setImmediate\njr                        = JSON.stringify\ncopy                      = ( P... ) -> assign {}, P...\nrprx                      = ( d ) -> \"#{d.sigil} #{d.key}:: #{jr d.value ? null} #{jr d.stamped ? false}\"\n# echo '{ ' + ( ( name for name of require './recycle' ).sort().join '\\n  ' ) + \" } = require './recycle'\"\n{ $recycle\n  $unwrap_recycled\n  is_recycling\n  is_stamped\n  is_system\n  new_end_event\n  new_event\n  new_single_event\n  new_start_event\n  new_stop_event\n  new_system_event\n  new_push_source\n  recycling\n  select\n  select_all\n  stamp\n  unwrap_recycled } = require './recycle'\n\n#-----------------------------------------------------------------------------------------------------------\nprovide_collatz = ->\n\n  #-----------------------------------------------------------------------------------------------------------\n  @new_number_event = ( value, other... ) ->\n    return new_single_event 'number', value, other...\n\n  #-----------------------------------------------------------------------------------------------------------\n  @is_one  = ( n ) -> n is 1\n  @is_odd  = ( n ) -> n %% 2 isnt 0\n  @is_even = ( n ) -> n %% 2 is 0\n\n  #-----------------------------------------------------------------------------------------------------------\n  @$even_numbers = ( S ) ->\n    return $ ( d, send ) =>\n      return send d unless ( select d, '.', 'number' ) and ( @is_even d.value )\n      send stamp d\n      send recycling @new_number_event ( d.value / 2 )\n\n  #-----------------------------------------------------------------------------------------------------------\n  @$odd_numbers = ( S ) ->\n    return $ ( d, send ) =>\n      return send d unless ( select d, '.', 'number' ) and ( not @is_one d.value ) and ( @is_odd d.value )\n      send stamp d\n      send recycling ( @new_number_event ( d.value * 3 + 1 ) )\n\n  #-----------------------------------------------------------------------------------------------------------\n  @$skip_known = ( S ) ->\n    known = new Set()\n    return $ ( d, send ) =>\n      return send d unless select d, '.', 'number'\n      return urge '->', d.value if known.has d.value\n      send d\n      known.add d.value\n\n  #-----------------------------------------------------------------------------------------------------------\n  @$terminate = ( S ) ->\n    return $ ( d, send ) =>\n      if ( select_all d, '.', 'number' ) and ( @is_one d.value )\n        send stamp d\n        send new_end_event()\n      else\n        send d\n      return null\n\n  #-----------------------------------------------------------------------------------------------------------\n  @$throw_on_illegal = -> PS.$watch ( d ) ->\n    if ( select_all d, '.', 'number' ) and ( type = CND.type_of d.value ) isnt 'number'\n      throw new Error \"found an illegal #{type} in #{rpr d}\"\n    return null\n\n  #-----------------------------------------------------------------------------------------------------------\n  @$main = ( S ) ->\n    pipeline = []\n    # pipeline.push COLLATZ.$skip_known           S\n    pipeline.push COLLATZ.$even_numbers         S\n    pipeline.push COLLATZ.$odd_numbers          S\n    pipeline.push COLLATZ.$throw_on_illegal     S\n    # pipeline.push COLLATZ.$terminate            S\n    return PS.pull pipeline...\n\n  #-----------------------------------------------------------------------------------------------------------\n  return @\nCOLLATZ = provide_collatz.apply {}\n\n#-----------------------------------------------------------------------------------------------------------\n@new_sender = ( S ) ->\n  S.source    = new_push_source()\n  pipeline    = []\n  #.........................................................................................................\n  pipeline.push S.source\n  pipeline.push $unwrap_recycled()\n  pipeline.push PS.$delay 0.25\n  # pipeline.push PS.$defer()\n  pipeline.push COLLATZ.$main S\n  pipeline.push PS.$watch ( d ) -> if ( select d, '~', 'end' ) then S.source.end()\n  pipeline.push $recycle S.source.push\n  # pipeline.push PS.$watch ( d ) -> whisper rpr d\n  pipeline.push PS.$watch ( d ) -> help jr d\n  #.........................................................................................................\n  pipeline.push $ do ->\n    collector = null\n    ( d, send ) ->\n      collector ?= []\n      if select_all d, '~', 'collect'\n        send collector\n        collector = null\n      else if select_all d, '.', 'number'\n        collector.push d.value\n  #.........................................................................................................\n  pipeline.push PS.$watch ( d ) -> urge jr d\n  pipeline.push PS.$drain -> help 'ok'\n  PS.pull pipeline...\n  #.........................................................................................................\n  R       = ( value ) ->\n    if CND.isa_number value then  S.source.push new_event '.', 'number', value\n    else                          S.source.push value\n  R.end   = -> S.source.end()\n  return R\n\n\n############################################################################################################\nunless module.parent?\n  S = {}\n  send = @new_sender S\n  urge '-----------'\n  send 5\n  send new_system_event 'collect'\n  send 6\n  send new_system_event 'collect'\n  # for n in [ 2 .. 3 ]\n  #   debug n\n  #   do ( n ) ->\n  #     send n\n  #     # defer send n\n  #     send new_system_event 'collect'\n  #     urge '-----------'\n  #   # # send.end()\n  # # send new_system_event 'end'\n  # send.end()\n\n###\n\n  #-----------------------------------------------------------------------------------------------------------\n  @$odd_numbers = ( S ) ->\n    unq         = 'þ108'\n    syncnr      = 0\n    open_syncs  = new Map()\n    buffers     = {}\n    #.........................................................................................................\n    unq_from_sync = ( sync ) -> sync.replace ///^ ([^\\/]+) \\/ .* $///, '$1'\n    is_my_sync    = ( unq, sync ) -> return unq is unq_from_sync sync\n    #.........................................................................................................\n    has_open_syncs = ( unq ) ->\n      return false unless ( target = open_syncs.get unq )?\n      return target.size > 0\n    #.........................................................................................................\n    open_sync   = ( unq ) ->\n      syncnr += +1;\n      R       = \"#{unq}/#{syncnr}\"\n      open_syncs.set unq, ( target = new Set() ) unless ( target = open_syncs.get unq )?\n      target.add R\n      return R\n    #.........................................................................................................\n    close_sync = ( sync ) ->\n      unq = unq_from_sync sync\n      if ( target = open_syncs.get unq )?\n        target.delete sync\n        open_syncs.delete unq if target.size is 0\n        return [] unless ( R = buffers[ sync ] )?\n        delete buffers[ sync ]\n        return R\n    #.........................................................................................................\n    sync_stack = []\n    #.........................................................................................................\n    return $async ( d, send, done ) =>\n      whisper '88893', d, open_syncs if d.sync?\n      ## # TAINT should close in stack order ## #\n      #.....................................................................................................\n      if ( select d, '~', 'sync' ) and ( is_my_sync unq, d.sync )\n        sync_stack.pop()\n        send x for x in close_sync d.sync\n        return done()\n      #.....................................................................................................\n      if has_open_syncs unq\n        most_recent_sync = sync_stack[ sync_stack.length - 1 ]\n        debug '77663', most_recent_sync\n        ( buffers[ most_recent_sync ]?= [] ).push d\n        return done()\n      #.....................................................................................................\n      unless ( select d, '.', 'number' ) and ( not @is_one d.value ) and ( @is_odd d.value )\n        send d\n        return done()\n      #.....................................................................................................\n      sync = open_sync unq\n      sync_stack.push sync\n      send stamp d\n      send recycling ( @new_number_event ( d.value * 3 + 1 ) ), sync\n      done()\n###"
  ]
}