{
  "version": 3,
  "file": "mkts-table.js",
  "sourceRoot": "..",
  "sources": [
    "src/mkts-table.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n\n'use strict'\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'MKTS/TABLE'\nlog                       = CND.get_logger 'plain',     badge\ninfo                      = CND.get_logger 'info',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\nalert                     = CND.get_logger 'alert',     badge\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\nhelp                      = CND.get_logger 'help',      badge\nurge                      = CND.get_logger 'urge',      badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\nD                         = require 'pipedreams'\n$                         = D.remit.bind D\n$async                    = D.remit_async.bind D\n#...........................................................................................................\nECS                       = require './eval-cs'\nMKTS                      = require './main'\nMD_READER                 = require './md-reader'\nhide                      = MD_READER.hide.bind        MD_READER\ncopy                      = MD_READER.copy.bind        MD_READER\nstamp                     = MD_READER.stamp.bind       MD_READER\nunstamp                   = MD_READER.unstamp.bind     MD_READER\nselect                    = MD_READER.select.bind      MD_READER\nis_hidden                 = MD_READER.is_hidden.bind   MD_READER\nis_stamped                = MD_READER.is_stamped.bind  MD_READER\n#...........................................................................................................\ncopy                      = ( x ) -> Object.assign {}, x\njr                        = JSON.stringify\nIG                        = require 'intergrid'\n\n#-----------------------------------------------------------------------------------------------------------\ntex = ( source ) -> [ 'tex', source, ]\n\n#-----------------------------------------------------------------------------------------------------------\ntexr = ( ref, source ) ->\n  source = if ref? then \"#{source}% MKTSTBL #{ref}\\n\" else \"#{source}%\\n\"\n  return tex source\n\n\n#===========================================================================================================\n# INITIALIZATION\n#-----------------------------------------------------------------------------------------------------------\n@_new_description = ( S ) ->\n  R =\n    '~isa':               'MKTS/TABLE/description'\n    debug:                false\n    fails:                [] ### recoverable errors / fails warnings ###\n    fieldcells:           {} ### field extents in terms of cells, by field designations ###\n    cellfields:           {} ### which cells belong to what fields, by cellkeys ###\n    cell_dimensions:      {}\n    fieldborders:         {} ### field borders, as TikZ styles by edges ###\n    field_dimensions:     {} ### field extents in terms of (unitwidth,unitheight), by field designations ###\n    border_dimensions:    {} ### border extents in terms of (unitwidth,unitheight), by field designations ###\n    pod_dimensions:       {} ### pod extents in terms of (unitwidth,unitheight), by field designations ###\n    valigns:              {} ### vertical pod alignments, by field designations ###\n    cellwidths:           [ null, ] ### [ 0 ] is default, [ 1 .. grid.width ] explicit or implicit widths ###\n    cellheights:          [ null, ] ### [ 0 ] is default, [ 1 .. grid.height ] explicit or implicit heights ###\n    joint_coordinates:    null\n    #.......................................................................................................\n    styles:\n      sThin:              'thin'\n      sThick:             'thick'\n      sDotted:            'dotted'\n      sDashed:            'dashed'\n      sRed:               'red'\n      sBlack:             'black'\n      sDebugCellgrid:     'gray!30,sThin'\n      sDebugFieldgrid:    'gray!30,sThin'\n      sDebugJoints:       'gray!30,sThick'\n    #.......................................................................................................\n    default:\n      unitwidth:            '1mm'\n      unitheight:           '1mm'\n      cellwidths:           10\n      cellheights:          10\n      marginwidth:          0\n      marginheight:         0\n      paddingwidth:         0\n      paddingheight:        0\n  return R\n\n\n#===========================================================================================================\n# PUBLIC API\n#-----------------------------------------------------------------------------------------------------------\n@_set_unitsize = ( me, direction, text ) ->\n  unless direction in [ 'width', 'height', ]\n    throw _stackerr me, 'µ4613', \"expected 'width' or 'height', got #{rpr direction}\"\n  p = \"unit#{direction}\"\n  #.........................................................................................................\n  ### Do nothing if dimension already defined: ###\n  if me[ p ]?\n    return _record_fail me, 'µ5661', \"unable to re-define #{p}\"\n  #.........................................................................................................\n  me[ p ] = text\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_set_cellsizes = ( me, direction, text ) ->\n  unless direction in [ 'width', 'height', ]\n    throw _stackerr me, 'µ2352', \"expected 'width' or 'height', got #{rpr direction}\"\n  p = \"cell#{direction}s\"\n  #.........................................................................................................\n  ### Do nothing if dimension already defined: ###\n  if me[ p ].length > 1\n    return _record_fail me, 'µ8613', \"unable to re-define #{p}\"\n  #.........................................................................................................\n  @_ensure_grid me\n  lane_count = me.grid[ direction ]\n  #.........................................................................................................\n  ### Apply default unless text matches (simplified) float pattern: ###\n  unless ( match = text.match /^([+\\d.]+)$/ )?\n    _record_fail me, 'µ6377', \"need a text like '2.7' or similar for mkts-table/#{p}, got #{rpr text}\"\n    value = me.default[ p ]\n  else\n    value = parseFloat text\n  me[ p ][  0 ] = value ### set default ###\n  me[ p ][ nr ] = value for nr in [ 1 .. lane_count ]\n  #.........................................................................................................\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@grid = ( me, text ) ->\n  if me.grid?\n    return _record_fail me, 'µ5689', \"unable to re-define grid\"\n  me.grid = IG.GRID.new_grid_from_cellkey text\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@unitwidth    = ( me, text ) -> @_set_unitsize  me, 'width',    text\n@unitheight   = ( me, text ) -> @_set_unitsize  me, 'height',   text\n@cellwidths   = ( me, text ) -> @_set_cellsizes me, 'width',    text\n@cellheights  = ( me, text ) -> @_set_cellsizes me, 'height',   text\n\n#-----------------------------------------------------------------------------------------------------------\n@fieldcells = ( me, text ) ->\n  @_ensure_grid       me\n  @_ensure_unitvector me\n  # { left_colnr, right_colnr, top_rownr, bottom_rownr, }\n  d           = IG.GRID.parse_rangekey me.grid, text\n  designation = IG.CELLS.get_cellkey { colnr: d.left_colnr, rownr: d.top_rownr, }\n  ### TAINT we should allow multiple fields with same designation ###\n  if me.fieldcells[ designation ]?\n    throw new Error \"(MKTS/TABLE µ5375) unable to redefine field #{designation}: #{rpr text}\"\n  #.........................................................................................................\n  me.fieldcells[ designation ] = d\n  for fieldcell from IG.GRID.walk_cells_from_rangeref me.grid, d\n    ( me.cellfields[ fieldcell.cellkey ]?= [] ).push designation\n  #.........................................................................................................\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@fieldborder = ( me, text ) ->\n  d = @_parse_fieldborder me, text\n  for field in d.fields\n    for edge in d.edges\n      ( me.fieldborders[ field ]?= {} )[ edge ] = d.style\n  #.........................................................................................................\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@fieldalignvertical = ( me, text ) ->\n  unless ( match = text.match /^(.+?):([^:]+)$/ )?\n    throw new Error \"(MKTS/TABLE µ5229) expected something like 'c3:top' for mkts-table/fieldalignvertical, got #{rpr text}\"\n  [ _, fieldhints, value, ] = match\n  #.........................................................................................................\n  unless value in [ 'top', 'bottom', 'center', 'spread', ]\n    throw new Error \"(MKTS/TABLE µ1876) expected one of 'top', 'bottom', 'center', 'spread' for mkts-table/fieldalignvertical, got #{rpr value}\"\n  #.........................................................................................................\n  for [ fail, field_designation, ] from @_walk_f_field_designations_from_hints me, fieldhints\n    ### TAINT ad-hoc fail message production, use method ###\n    if fail? then _record me, \"#{fail} (#{jr {field_designation}})\"\n    else          me.valigns[ field_designation ] = value\n  #.........................................................................................................\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@debug = ( me, text ) ->\n  switch text\n    when 'true'   then me.debug = true\n    when 'false'  then me.debug = false\n    else throw new Error \"(MKTS/TABLE µ1343) expected 'true' or 'false' for mkts-table/debug, got #{rpr text}\"\n  #.........................................................................................................\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@marginwidth = ( me, text ) ->\n  @_ensure_unitvector me\n  ### TAINT use parser, validate syntax ###\n  me.marginwidth = parseFloat text\n  #.........................................................................................................\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@marginheight = ( me, text ) ->\n  @_ensure_unitvector me\n  ### TAINT use parser, validate syntax ###\n  me.marginheight = parseFloat text\n  #.........................................................................................................\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@paddingwidth = ( me, text ) ->\n  @_ensure_unitvector me\n  ### TAINT use parser, validate syntax ###\n  me.paddingwidth = parseFloat text\n  #.........................................................................................................\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@paddingheight = ( me, text ) ->\n  @_ensure_unitvector me\n  ### TAINT use parser, validate syntax ###\n  me.paddingheight = parseFloat text\n  #.........................................................................................................\n  return null\n\n\n#===========================================================================================================\n# PARSERS ETC\n#-----------------------------------------------------------------------------------------------------------\n@_idx_from_col_and_row = ( col, row ) ->\n  unless ( type = CND.type_of col ) is 'text'\n    throw new Error \"(MKTS/TABLE µ6848) expected a text for col, got a #{rpr type}\"\n  unless ( type = CND.type_of row ) is 'text'\n    throw new Error \"(MKTS/TABLE µ1080) expected a text for row, got a #{rpr type}\"\n  #.........................................................................................................\n  col_idx = ( col.codePointAt 0 ) - ( 'a'.codePointAt 0 )\n  row_idx = ( parseInt row, 10 ) - 1\n  return { col: col_idx, row: row_idx, }\n\n#-----------------------------------------------------------------------------------------------------------\n### TAINT use proper parsing tool ###\n@_parse_fieldborder = ( me, fieldborder ) ->\n  unless ( type = CND.type_of fieldborder ) is 'text'\n    throw new Error \"(MKTS/TABLE µ1225) expected a text for fieldborder, got a #{rpr type}\"\n  unless ( groups = fieldborder.match /^(.+):(.+):(.*)$/ )?\n    throw new Error \"(MKTS/TABLE µ2582) expected a fieldborder like 'a1:left:sDashed,sThick', got #{rpr fieldborder}\"\n  [ _, fieldhints, edges, style, ] = groups\n  #.........................................................................................................\n  edges = ( _.trim() for _ in edges.split ',' )\n  edges = [ 'top', 'left', 'bottom', 'right', ] if '*' in edges\n  #.........................................................................................................\n  ### TAINT code duplication ###\n  ### TAINT this will have to be changed to allow for named fields ###\n  fieldhints = new Set ( _.trim() for _ in fieldhints.split ',' )\n  if fieldhints.has '*'\n    fields = Object.keys me.fieldcells\n  else\n    ### TAINT as it stands, `fieldborder'table:bottom,right:red'` will style all bottom and right borders\n    of all fields that have real estate along the bottom and right borders of the table. An improved version\n    should probably only affect the bottom borders of table-bottom fields and the right borders of\n    table-right fields. Use two statements `fieldborder'table:bottom:red'`, `fieldborder'table:right:red'` to\n    express that meaning FTTB. ###\n    if fieldhints.has 'table'\n      fieldhints.delete 'table'\n      for edge in edges\n        fieldhints.add d.cellkey for d from IG.GRID.walk_edge_cellrefs me.grid, edge\n    cellkeys    = ( fieldhint for fieldhint from fieldhints )\n    fields      = @_fieldnames_from_cellkeys me, cellkeys\n  #.........................................................................................................\n  style = style.trim()\n  style = null if style in [ 'none', '', ]\n  #.........................................................................................................\n  return { fields, edges, style, }\n\n\n#===========================================================================================================\n# EVENT GENERATORS\n#-----------------------------------------------------------------------------------------------------------\n@_walk_events = ( me, fieldhints_and_content_events ) ->\n  @_compute_cell_dimensions     me\n  @_compute_field_dimensions    me\n  @_compute_border_dimensions   me\n  @_compute_pod_dimensions      me\n  #.........................................................................................................\n  ### Preparatory ###\n  yield from @_walk_opening_events                      me\n  yield from @_walk_style_events                        me ### TAINT should write to document preamble ###\n  #.........................................................................................................\n  ### Borders, content ###\n  yield from @_walk_field_borders_events                me\n  yield from @_walk_pod_events                          me, fieldhints_and_content_events\n  #.........................................................................................................\n  ### Debugging ### ### TAINT should make ordering configurable so we can under- or overprint debugging ###\n  yield from @_walk_debug_joints_events                 me\n  yield from @_walk_debug_cellgrid_events               me\n  yield from @_walk_debug_fieldgrid_events              me\n  #.........................................................................................................\n  ### Finishing ###\n  yield from @_walk_closing_events                      me\n  yield from @_convert_fails_to_warnings                me\n  #.........................................................................................................\n  # ### dump description for debugging ###\n  # ### TAINT make dump configurable ###\n  # ### TAINT print in smaller type ###\n  # yield [ 'tex', '\\\\par{}', ]\n  # yield [ 'text', \"MKTS Table Description:\\n\\n\", ( copy me.meta ), ]\n  # yield [ '(', 'code', [],                       ( copy me.meta ), ]\n  # yield [ '.', 'text', ( rpr me ),               ( copy me.meta ), ]\n  # yield [ ')', 'code', [],                       ( copy me.meta ), ]\n  # yield [ 'tex', '\\\\par{}', ]\n  #.........................................................................................................\n  yield return\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_opening_events = ( me ) ->\n  @_ensure_unitvector me\n  yield tex \"\\n\\n\"\n  yield tex \"\\\\par% Beginning of MKTS Table ==============================================================================\\n\"\n  yield texr 'µ1', \"{\\\\setlength{\\\\fboxsep}{0mm}\"\n  ### TAINT insert proper dimensions ###\n  yield texr 'µ2', \"\\\\begin{minipage}[t][45mm][t]{100mm}\"\n  yield texr 'µ3', \"\\\\newdimen\\\\mktsTableUnitwidth\\\\setlength{\\\\mktsTableUnitwidth}{#{me.unitwidth}}\"\n  yield texr 'µ4', \"\\\\newdimen\\\\mktsTableUnitheight\\\\setlength{\\\\mktsTableUnitheight}{#{me.unitheight}}\"\n  yield texr 'µ5', \"\\\\begin{tikzpicture}[ overlay, yshift = 0mm, yscale = -1, line cap = rect ]\"\n  yield texr 'µ6', \"\\\\tikzset{x=#{me.unitwidth}};\\\\tikzset{y=#{me.unitheight}};\"\n  yield return\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_closing_events = ( me ) ->\n  yield texr 'µ7', \"\\\\end{tikzpicture}\"\n  yield texr 'µ8', \"\\\\end{minipage}}\"\n  yield tex \"\\\\par% End of MKTS Table ====================================================================================\\n\\n\"\n  yield return\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_style_events = ( me ) ->\n  for key, value of me.styles\n    yield texr 'µ9', \"\\\\tikzset{#{key}/.style={#{value}}}\"\n  yield return\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_field_borders_events = ( me ) ->\n  #.........................................................................................................\n  for designation, d of me.border_dimensions\n    continue unless ( fieldborders = me.fieldborders[ designation ] )?\n    if ( borderstyle = fieldborders[ 'left' ] )?\n      yield texr 'µ10', \"\\\\draw[#{borderstyle}] (#{d.left},#{d.top}) -- (#{d.left},#{d.bottom});\"\n    if ( borderstyle = fieldborders[ 'right' ] )?\n      yield texr 'µ11', \"\\\\draw[#{borderstyle}] (#{d.right},#{d.top}) -- (#{d.right},#{d.bottom});\"\n    if ( borderstyle = fieldborders[ 'top' ] )?\n      yield texr 'µ12', \"\\\\draw[#{borderstyle}] (#{d.left},#{d.top}) -- (#{d.right},#{d.top});\"\n    if ( borderstyle = fieldborders[ 'bottom' ] )?\n      yield texr 'µ13', \"\\\\draw[#{borderstyle}] (#{d.left},#{d.bottom}) -- (#{d.right},#{d.bottom});\"\n  #.........................................................................................................\n  yield return\n\n#-----------------------------------------------------------------------------------------------------------\n@_get_valign_tex = ( me, valign ) ->\n  return switch valign\n    when 'top'    then 't'\n    when 'bottom' then 'b'\n    when 'center' then 'c'\n    when 'spread' then 's'\n    else throw new Error \"(MKTS/TABLE µ4799) illegal value for valign #{rpr valign}\"\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_most_recent_field_designations = ( me, fieldhints_and_stuff ) ->\n  ### Given a list of `[ fieldhints, x... ]` lists, return a list of `[ designation, x... ]` lists such\n  that each `designation` that resulted from each of the `fieldhints` is only kept from the instance\n  that appeared last in the list. Each `fieldhints` can produce an arbitrary number of matching field\n  designations, and later occurrences of a given field will replace earlier appearances. ###\n  R = {}\n  for [ fieldhints, stuff..., ] in fieldhints_and_stuff\n    for [ fail, field_designation, ] from @_walk_f_field_designations_from_hints me, fieldhints\n      if fail? then _record me, fail\n      else          R[ field_designation ]  = stuff\n  yield [ field_designation, stuff..., ] for field_designation, stuff of R\n  yield return\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_pod_events = ( me, fieldhints_and_content_events ) ->\n  for [ field_designation, content, ] from @_walk_most_recent_field_designations me, fieldhints_and_content_events\n    d           = me.pod_dimensions[ field_designation ]\n    valign_tex  = @_get_valign_tex me, me.valigns[ field_designation ] ? me.valigns[ '*' ] ? 'center'\n    yield texr 'µ14', \"\\\\node[anchor=north west,inner sep=0mm] at (#{d.left},#{d.top})\"\n    yield texr 'µ15', \"{\\\\begin{minipage}[t][#{d.height}\\\\mktsTableUnitheight][#{valign_tex}]{#{d.width}\\\\mktsTableUnitwidth}\"\n    yield [ '.', 'noindent', null, {}, ]\n    yield sub_event for sub_event in content\n    yield texr 'µ16', \"\\\\end{minipage}};\"\n  #.........................................................................................................\n  yield return\n\n\n#===========================================================================================================\n# EVENT GENERATORS: DEBUGGING EVENTS\n#-----------------------------------------------------------------------------------------------------------\n@_should_debug = ( me ) -> me.debug or ( me.fails.length != 0 )\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_debug_cellgrid_events = ( me ) ->\n  unless @_should_debug me\n    yield return\n  #.........................................................................................................\n  yield texr 'µ17', \"\\\\begin{scope}[on background layer]\"\n  #.........................................................................................................\n  ### TAINT use fixed size like 1mm ###\n  top       = ( @_top_from_rownr     me, 1             ) - 3\n  bottom    = ( @_bottom_from_rownr  me, me.grid.height ) + 3\n  for colnr in [ 1 .. me.grid.width + 1 ]\n    x = @_left_from_colnr me, colnr\n    yield texr 'µ18', \"\\\\draw[sDebugCellgrid] (#{x},#{top}) -- (#{x},#{bottom});\"\n  #.........................................................................................................\n  ### TAINT use fixed size like 1mm ###\n  left      = ( @_left_from_colnr    me, 1             ) - 3\n  right     = ( @_right_from_colnr   me, me.grid.width  ) + 3\n  for rownr in [ 1 .. me.grid.height + 1 ]\n    y = @_top_from_rownr me, rownr\n    yield texr 'µ19', \"\\\\draw[sDebugCellgrid] (#{left},#{y}) -- (#{right},#{y});\"\n  #.........................................................................................................\n  yield texr 'µ20', \"\\\\end{scope}\"\n  #.........................................................................................................\n  yield return\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_debug_fieldgrid_events = ( me ) ->\n  unless @_should_debug me\n    yield return\n  #.........................................................................................................\n  yield texr 'µ21', \"\\\\begin{scope}[on background layer]\"\n  #.........................................................................................................\n  for designation, d of me.field_dimensions\n    ### TAINT use fixed size like 1mm ###\n    left   = d.left   + 0.5\n    right  = d.right  - 0.5\n    top    = d.top    + 0.5\n    bottom = d.bottom - 0.5\n    yield [ 'tex', \"\\\\draw[sDebugFieldgrid] (#{left},#{bottom})\" \\\n                 + \" -- (#{left},#{top})\"                       \\\n                 + \" -- (#{right},#{top});\", ]\n    yield [ 'tex', \" \\\\draw[sDebugFieldgrid] (#{right},#{top}) \" \\\n                 + \" -- (#{right},#{bottom});\", ]\n    yield [ 'tex', \" \\\\draw[sDebugFieldgrid] (#{left},#{bottom}) \" \\\n                 + \" -- (#{right},#{bottom});\", ]\n    yield [ 'tex', \"% MKTSTBL@26\\n\", ]\n  #.........................................................................................................\n  yield texr 'µ22', \"\\\\end{scope}\"\n  #.........................................................................................................\n  yield return\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_debug_joints_events = ( me ) ->\n  unless @_should_debug me\n    yield return\n  @_ensure_grid me\n  @_ensure_joint_coordinates  me\n  #.........................................................................................................\n  yield texr 'µ23', \"\\\\begin{scope}[on background layer]\"\n  #.........................................................................................................\n  ### TAINT use fixed size like 1mm ###\n  for [ colletters, colnr, ] from IG.GRID.walk_colletters_and_colnrs me.grid\n    for rownr from IG.GRID.walk_rownrs me.grid\n      x = ( @_left_from_colnr  me, colnr ) + 2\n      y = ( @_top_from_rownr   me, rownr ) + 2\n      cellkey = \"#{colletters}#{rownr}\"\n      yield tex \"\\\\node[sDebugJoints] at (#{x},#{y}) {{\\\\mktsStyleCode{}#{cellkey}}}; \"\n  #.........................................................................................................\n  yield texr 'µ24', \"\\\\end{scope}\"\n  #.........................................................................................................\n  yield return\n\n#-----------------------------------------------------------------------------------------------------------\n@_convert_fails_to_warnings = ( me ) ->\n  for fail in me.fails\n    yield [ '.', 'warning', fail, ( copy me.meta ), ]\n    yield [ 'tex', '\\\\par\\n', ]\n  yield return\n\n\n#===========================================================================================================\n# ENSURERS\n#-----------------------------------------------------------------------------------------------------------\n@_ensure_unitvector = ( me ) ->\n  @unitwidth  me, me.default.unitwidth   unless me.unitwidth?\n  @unitheight me, me.default.unitheight  unless me.unitheight?\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_ensure_joint_coordinates = ( me ) ->\n  return null if me.joint_coordinates?\n  @_ensure_cellwidths   me\n  @_ensure_cellheights  me\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_ensure_grid = ( me ) ->\n  return null if me.grid?\n  throw new Error \"(MKTS/TABLE µ5307) grid must be set\"\n\n#-----------------------------------------------------------------------------------------------------------\n@_ensure_cellwidths = ( me ) ->\n  return null if ( me.cellwidths.length is me.grid.width + 1 ) and ( null not in me.cellwidths[ 1 .. ] )\n  throw new Error \"(MKTS/TABLE µ4039) cellwidths must be all set; got #{rpr me.cellwidths}\"\n\n#-----------------------------------------------------------------------------------------------------------\n@_ensure_cellheights = ( me ) ->\n  return null if ( me.cellheights.length is me.grid.height + 1 ) and ( null not in me.cellheights[ 1 .. ] )\n  throw new Error \"(MKTS/TABLE µ8054) cellheights must be all set; got #{rpr me.cellheights}\"\n\n#-----------------------------------------------------------------------------------------------------------\n@_ensure_margin = ( me ) ->\n  @marginwidth   me, me.default.marginwidth   unless me.marginwidth?\n  @marginheight  me, me.default.marginheight  unless me.marginheight?\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_ensure_padding = ( me ) ->\n  @paddingwidth   me, me.default.paddingwidth   unless me.paddingwidth?\n  @paddingheight  me, me.default.paddingheight  unless me.paddingheight?\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_compute_cell_dimensions = ( me ) ->\n  @_ensure_grid me\n  for [ colletters, colnr, ] from IG.GRID.walk_colletters_and_colnrs me.grid\n    for rownr from IG.GRID.walk_rownrs me.grid\n      designation   = \"#{colletters}#{rownr}\"\n      left   = @_left_from_colnr   me, colnr\n      right  = @_right_from_colnr  me, colnr\n      top    = @_top_from_rownr    me, rownr\n      bottom = @_bottom_from_rownr me, rownr\n      # ### TAINT must not become negative ###\n      # cellwidth_u   = right  - left # - 2 * me.marginwidth\n      # cellheight_u  = bottom - top  # - 2 * me.marginheight\n      me.cell_dimensions[ designation ] = {\n        colnr,         rownr,\n        left,    right,\n        top,     bottom, }\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_compute_field_dimensions = ( me ) ->\n  ### TAINT use me.field_dimensions ###\n  for designation, fieldcells of me.fieldcells\n    left   = ( @_left_from_colnr   me, fieldcells.left_colnr    )\n    right  = ( @_right_from_colnr  me, fieldcells.right_colnr   )\n    top    = ( @_top_from_rownr    me, fieldcells.top_rownr     )\n    bottom = ( @_bottom_from_rownr me, fieldcells.bottom_rownr  )\n    width       = right  - left\n    height      = bottom - top\n    me.field_dimensions[ designation ] = {\n      left,  right,   width,\n      top,   bottom,  height, }\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_compute_border_dimensions = ( me ) ->\n  @_ensure_margin me\n  for designation, d of me.field_dimensions\n    left   = d.left   + me.marginwidth\n    right  = d.right  - me.marginwidth\n    top    = d.top    + me.marginheight\n    bottom = d.bottom - me.marginheight\n    ### TAINT must not become negative ###\n    width       = right  - left\n    height      = bottom - top\n    me.border_dimensions[ designation ] = {\n      left,  right,   width,\n      top,   bottom,  height, }\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_compute_pod_dimensions = ( me ) ->\n  @_ensure_padding me\n  for designation, d of me.field_dimensions\n    left   = d.left   + me.paddingwidth\n    right  = d.right  - me.paddingwidth\n    top    = d.top    + me.paddingheight\n    bottom = d.bottom - me.paddingheight\n    ### TAINT must not become negative ###\n    width       = right  - left\n    height      = bottom - top\n    me.pod_dimensions[ designation ] = {\n      left,  right,   width,\n      top,   bottom,  height, }\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@_left_from_colnr = ( me, colnr ) ->\n  ### TAINT should precompute ###\n  @_ensure_cellwidths me\n  R = 0\n  R += me.cellwidths[ nr ] for nr in [ 1 ... colnr ]\n  return R\n\n#-----------------------------------------------------------------------------------------------------------\n@_right_from_colnr = ( me, colnr ) ->\n  return ( @_left_from_colnr me, colnr ) + me.cellwidths[ colnr ]\n\n#-----------------------------------------------------------------------------------------------------------\n@_top_from_rownr = ( me, rownr ) ->\n  ### TAINT should precompute ###\n  @_ensure_cellheights me\n  R = 0\n  R += me.cellheights[ nr ] for nr in [ 1 ... rownr ]\n  return R\n\n#-----------------------------------------------------------------------------------------------------------\n@_bottom_from_rownr = ( me, rownr ) ->\n  return ( @_top_from_rownr me, rownr ) + me.cellheights[ rownr ]\n\n#-----------------------------------------------------------------------------------------------------------\n@_fieldnames_from_cellkeys = ( me, cellkeys ) ->\n  R = new Set()\n  for cellkey in cellkeys\n    continue unless ( cellfields = me.cellfields[ cellkey ] )?\n    R.add fieldname for fieldname in cellfields\n  return ( fieldname for fieldname from R )\n\n\n#===========================================================================================================\n# ITERATORS\n#-----------------------------------------------------------------------------------------------------------\n@_walk_f_field_designations_from_hints = ( me, fieldhints ) ->\n  ### TAINT this will have to be changed to allow for named fields ###\n  count           = 0\n  fieldhints_set  = new Set ( _.trim() for _ in fieldhints.split ',' )\n  #.........................................................................................................\n  if fieldhints_set.has '*'\n    keys    = Object.keys me.fieldcells\n    count  += keys.length\n    yield [ null, key, ] for key in keys\n  #.........................................................................................................\n  else\n    seen_field_designations = new Set()\n    for fieldhint from fieldhints_set\n      continue unless ( field_designations = me.cellfields[ fieldhint ] )?\n      for field_designation in field_designations\n        continue if seen_field_designations.has field_designation\n        seen_field_designations.add field_designation\n        count += +1\n        yield [ null, field_designation, ]\n  #.........................................................................................................\n  if count is 0\n    yield [ ( _fail me, 'µ5131', \"field hint #{rpr fieldhints} do not match any field\" ), null ]\n  #.........................................................................................................\n  yield return\n\n#-----------------------------------------------------------------------------------------------------------\n@_walk_table_edge_field_designations = ( me, edge ) ->\n  seen_field_designations = new Set()\n  for d from IG.GRID.walk_edge_cellrefs me.grid, edge\n    continue unless ( field_designations = me.cellfields[ d.cellkey ] )?\n    for field_designation in field_designations\n      continue if seen_field_designations.has field_designation\n      seen_field_designations.add field_designation\n      yield field_designation\n  yield return\n\n\n#===========================================================================================================\n# HELPERS\n#-----------------------------------------------------------------------------------------------------------\n_stackerr = ( me, ref, message, error = null ) ->\n  ###\n  Prepends local error message to the original one so we get more informative traces. Usage:\n\n  ```\n  try\n    ...\n  catch error\n    throw _stackerr error, \"(MKTS/TABLE µ4781) ... new message ...\"\n  ```\n  ###\n  filename  = me.meta.filename ? '<NOFILENAME>'\n  line_nr   = me.meta.line_nr ? '(NOLINENR)'\n  message   = \"[#{badge}##{ref}: #{filename}##{line_nr}]: #{message}\"\n  if error?\n    error.message = \"#{message}\\n#{error.message}\"\n  else\n    ### TAINT elide current line from stack trace ###\n    error = new Error message\n  return error\n\n#-----------------------------------------------------------------------------------------------------------\n_fail = ( me, ref, message ) ->\n  ### TAINT using strings as error values is generally being frowned upon ###\n  filename    = me.meta.filename  ? '<NOFILENAME>'\n  line_nr     = me.meta.line_nr   ? '(NOLINENR)'\n  return \"[#{badge}##{ref}: #{filename}##{line_nr}]: #{message}\"\n\n#-----------------------------------------------------------------------------------------------------------\n_record = ( me, message ) ->\n  me.fails.push message\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n_record_fail = ( me, ref, message ) -> _record me, _fail me, ref, message\n\n\n"
  ]
}