{"version":3,"sources":["tests.coffee"],"names":[],"mappings":"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","file":"tests.js","sourceRoot":"/source/","sourcesContent":["\n\n\n\n\n\n############################################################################################################\nnjs_path                  = require 'path'\n# njs_fs                    = require 'fs'\njoin                      = njs_path.join\n#...........................................................................................................\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'JIZURA/tests'\nlog                       = CND.get_logger 'plain',     badge\ninfo                      = CND.get_logger 'info',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\nalert                     = CND.get_logger 'alert',     badge\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\nhelp                      = CND.get_logger 'help',      badge\nurge                      = CND.get_logger 'urge',      badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\nsuspend                   = require 'coffeenode-suspend'\nstep                      = suspend.step\nafter                     = suspend.after\n# eventually                = suspend.eventually\n### TAINT experimentally using `later` in place of `setImmediate` ###\nlater                     = suspend.immediately\n#...........................................................................................................\ntest                      = require 'guy-test'\n#...........................................................................................................\nD                         = require 'pipedreams'\n$                         = D.remit.bind D\n$async                    = D.remit_async.bind D\n#...........................................................................................................\nMKTS                      = require './main'\n\n\n#===========================================================================================================\n# HELPERS\n#-----------------------------------------------------------------------------------------------------------\nshow_events = ( probe, events ) ->\n  whisper probe\n  echo \"[\"\n  for event in events\n    echo \"    #{JSON.stringify event}\"\n  echo \"    ]\"\n\n#-----------------------------------------------------------------------------------------------------------\ncopy_regex_non_global = ( re ) ->\n  flags = ( if re.ignoreCase then 'i' else '' ) + \\\n          ( if re.multiline  then 'm' else '' ) +\n          ( if re.sticky     then 'y' else '' )\n  return new RegExp re.source, flags\n\n#-----------------------------------------------------------------------------------------------------------\nlist_from_match = ( match ) ->\n  return null unless match?\n  R = Array.from match\n  R.splice 0, 1\n  return R\n\n#-----------------------------------------------------------------------------------------------------------\nmatch_first = ( patterns, probe ) ->\n  for pattern in patterns\n    return R if ( R = probe.match pattern )?\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\nnice_text_rpr = ( text ) ->\n  ### Ad-hoc method to print out text in a readable, CoffeeScript-compatible, triple-quoted way. Line breaks\n  (`\\\\n`) will be shown as line breaks, so texts should not be as spaghettified as they appear with\n  JSON.stringify (the last line break of a string is, however, always shown in its symbolic form so it\n  won't get swallowed by the CoffeeScript parser). Code points below U+0020 (space) are shown as\n  `\\\\x00`-style escapes, taken up less space than `\\u0000` escapes while keeping things explicit. All\n  double quotes will be prepended with a backslash. ###\n  R = text\n  R = R.replace /[\\x00-\\x09\\x0b-\\x19]/g, ( $0 ) ->\n    cid_hex = ( $0.codePointAt 0 ).toString 16\n    cid_hex = '0' + cid_hex if cid_hex.length is 1\n    return \"\\\\x#{cid_hex}\"\n  R = R.replace /\"/g, '\\\\\"'\n  R = R.replace /\\n$/g, '\\\\n'\n  R = '\\n\"\"\"' + R + '\"\"\"'\n  return R\n\n#===========================================================================================================\n# TESTS\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.action_patterns match action macros\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"<<(.>><<)>>\",[\"\",\".\",\"\",\"\",\"\"]]\n    [\"<<(.>>xxx<<)>>\",[\"\",\".\",\"\",\"xxx\",\"\"]]\n    [\"<<(.>>some code<<)>>\",[\"\",\".\",\"\",\"some code\",\"\"]]\n    [\"abc<<(.>>4 + 3<<)>>def\",[\"c\",\".\",\"\",\"4 + 3\",\"\"]]\n    [\"<<(:>><<)>>\",[\"\",\":\",\"\",\"\",\"\"]]\n    [\"<<(:>>xxx<<)>>\",[\"\",\":\",\"\",\"xxx\",\"\"]]\n    [\"<<(:>>some code<<)>>\",[\"\",\":\",\"\",\"some code\",\"\"]]\n    [\"abc<<(:>>4 + 3<<)>>def\",[\"c\",\":\",\"\",\"4 + 3\",\"\"]]\n    [\"abc<<(:>>bitfield \\\\>> 1 <<)>>def\",[\"c\",\":\",\"\",\"bitfield \\\\>> 1 \",\"\"]]\n    [\"abc<<(:>>bitfield >\\\\> 1 <<)>>def\",[\"c\",\":\",\"\",\"bitfield >\\\\> 1 \",\"\"]]\n    [\"abc<<(:js>>4 + 3<<)>>def\",[\"c\",\":\",\"js\",\"4 + 3\",\"\"]]\n    [\"abc<<(.js>>4 + 3<<)>>def\",[\"c\",\".\",\"js\",\"4 + 3\",\"\"]]\n    [\"abc<<(:js>>4 + 3<<:js)>>def\",[\"c\",\":\",\"js\",\"4 + 3\",\":js\"]]\n    [\"abc<<(.js>>4 + 3<<.js)>>def\",[\"c\",\".\",\"js\",\"4 + 3\",\".js\"]]\n    [\"abc<<(:js>>4 + 3<<:)>>def\",null]\n    [\"abc<<(.js>>4 + 3<<.)>>def\",null]\n    ]\n  patterns = ( copy_regex_non_global pattern for pattern in MKTS.MACRO_ESCAPER.action_patterns )\n  for [ probe, matcher, ] in probes_and_matchers\n    result = list_from_match match_first patterns, probe\n    help JSON.stringify [ probe, result, ]\n    T.eq result, matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.region_patterns match region macros\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"<<(>><<)>>\",[\"\",\"(\",\"\",\"\"]]\n    [\"<<(bold>><<)>>\",[\"\",\"(\",\"bold\",\"\"]]\n    [\"<<(bold>><<bold)>>\",[\"\",\"(\",\"bold\",\"\"]]\n    [\"<<(foo>><<bar)>>\",[\"\",\"(\",\"foo\",\"\"]]\n    [\"yadda <<(foo>>grom<<bar)>> blah <<)>>\",[\" \",\"(\",\"foo\",\"\"]]\n    [\"yadda <<bar)>> blah <<)>>\",[\" \",\"\",\"bar\",\")\"]]\n    ]\n  patterns = ( copy_regex_non_global pattern for pattern in MKTS.MACRO_ESCAPER.region_patterns )\n  for [ probe, matcher, ] in probes_and_matchers\n    result = list_from_match match_first patterns, probe\n    help JSON.stringify [ probe, result, ]\n    T.eq result, matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.bracketed_raw_patterns matches raw macro\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"<<<...raw material...>>>\",[\"\",\"<\",\"...raw material...\"]]\n    [\"<<(.>>some code<<)>>\",null]\n    [\"<<<>>>\",[\"\",\"<\",\"\"]]\n    [\"abcdef<<<\\\\XeLaTeX{}>>>ghijklm\",[\"f\",\"<\",\"\\\\XeLaTeX{}\"]]\n    [\"abcdef<<<123\\\\>>>0>>>ghijklm\",[\"f\",\"<\",\"123\\\\>>>0\"]]\n    [\"abcdef\\\\<<<123>>>ghijklm\",null]\n    [\"abcdef<\\\\<<123>>>ghijklm\",null]\n    [\"abcdef<<\\\\<123>>>ghijklm\",null]\n    [\"abcdef<<<123>>\\\\>ghijklm\",null]\n    ]\n  patterns = ( copy_regex_non_global pattern for pattern in MKTS.MACRO_ESCAPER.bracketed_raw_patterns )\n  for [ probe, matcher, ] in probes_and_matchers\n    result = list_from_match match_first patterns, probe\n    help JSON.stringify [ probe, result, ]\n    T.eq result, matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.command_and_value_patterns matches command macro\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"<<!>>\",[\"\",\"!\",\"\"]]\n    [\"<<!name>>\",[\"\",\"!\",\"name\"]]\n    [\"abc<<!name>>def\",[\"c\",\"!\",\"name\"]]\n    [\"abc<<!n>me>>def\",[\"c\",\"!\",\"n>me\"]]\n    [\"abc<<!n>\\\\>me>>def\",[\"c\",\"!\",\"n>\\\\>me\"]]\n    [\"abc<<!n\\\\>me>>def\",[\"c\",\"!\",\"n\\\\>me\"]]\n    [\"abc\\\\<<!nme>>def\",null]\n    [\"<<$>>\",[\"\",\"$\",\"\"]]\n    [\"<<$name>>\",[\"\",\"$\",\"name\"]]\n    [\"abc<<$name>>def\",[\"c\",\"$\",\"name\"]]\n    [\"abc<<$n>me>>def\",[\"c\",\"$\",\"n>me\"]]\n    [\"abc<<$n>\\\\>me>>def\",[\"c\",\"$\",\"n>\\\\>me\"]]\n    [\"abc<<$n\\\\>me>>def\",[\"c\",\"$\",\"n\\\\>me\"]]\n    [\"abc\\\\<<$nme>>def\",null]\n    ]\n  patterns = ( copy_regex_non_global pattern for pattern in MKTS.MACRO_ESCAPER.command_and_value_patterns )\n  for [ probe, matcher, ] in probes_and_matchers\n    result = list_from_match match_first patterns, probe\n    help JSON.stringify [ probe, result, ]\n    T.eq result, matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.illegal_patterns matches consecutive unescaped LPBs\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"helo world\",null]\n    [\"helo \\\\<< world\",null]\n    [\"helo <\\\\< world\",null]\n    [\"helo << world\",[\" \",\"<<\",\" world\"]]\n    ]\n  patterns = ( copy_regex_non_global pattern for pattern in MKTS.MACRO_ESCAPER.illegal_patterns )\n  for [ probe, matcher, ] in probes_and_matchers\n    result = list_from_match match_first patterns, probe\n    help JSON.stringify [ probe, result, ]\n    T.eq result, matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.end_command_patterns matches end command macro\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"some text here <<!end>> and some there\",[\"some text here \"]]\n    [\"some text here <<!end>>\",[\"some text here \"]]\n    [\"<<!end>>\",[\"\"]]\n    [\"\",null]\n    [\"<<!end>> and some there\",[\"\"]]\n    [\"\\\\<<!end>> and some there\",null]\n    [\"some text here \\\\<<!end>> and some there\",null]\n    [\"some text here <<!end>\\\\> and some there\",null]\n    ]\n  patterns = MKTS.MACRO_ESCAPER.end_command_patterns\n  for [ probe, matcher, ] in probes_and_matchers\n    result = list_from_match match_first patterns, probe\n    help JSON.stringify [ probe, result, ]\n    T.eq result, matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.escape.truncate_text_at_end_command_macro\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"some text here <<!end>> and some there\",[\"some text here \",23]]\n    [\"some text here <<!end>>\",[\"some text here \",8]]\n    [\"<<!end>>\",[\"\",8]]\n    [\"\",[\"\",0]]\n    [\"<<!end>> and some there\",[\"\",23]]\n    [\"\\\\<<!end>> and some there\",[\"\\\\<<!end>> and some there\",0]]\n    [\"some text here \\\\<<!end>> and some there\",[\"some text here \\\\<<!end>> and some there\",0]]\n    [\"some text here <<!end>\\\\> and some there\",[\"some text here <<!end>\\\\> and some there\",0]]\n    [\"\\n\\nfoo bar\\n\\n\\n\\n<<!end>>\\ndiscarded\",[\"\\n\\nfoo bar\\n\\n\\n\\n\",18]]\n    [\"\\n\\nfoo bar\\n\\n\\n\\n<<!end>>\\ndiscarded<<!end>>\\ndiscarded as well\",[\"\\n\\nfoo bar\\n\\n\\n\\n\",44]]\n    ]\n  for [ probe, matcher, ] in probes_and_matchers\n    result = MKTS.MACRO_ESCAPER.escape.truncate_text_at_end_command_macro null, probe\n    help JSON.stringify [ probe, result, ]\n    T.eq result, matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.escape.html_comments\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"some text here and some there\",\"some text here and some there\",[]]\n    [\"some text here<!-- omit this --> and some there\",\"some text here\\u0015comment0\\u0013 and some there\",[{\"key\":\"comment0\",\"markup\":null,\"raw\":\" omit this \",\"parsed\":\"omit this\"}]]\n    [\"some text here\\\\<!-- omit this --> and some there\",\"some text here\\\\<!-- omit this --> and some there\",[]]\n    [\"abcd<<<some raw content>>>efg\",\"abcd<<<some raw content>>>efg\",[]]\n    ]\n  for [ probe, text_matcher, registry_matcher, ] in probes_and_matchers\n    S = MKTS.MACRO_ESCAPER.initialize_state {}\n    text_result = MKTS.MACRO_ESCAPER.escape.html_comments S, probe\n    help JSON.stringify [ probe, text_result, S.MACRO_ESCAPER[ 'registry' ], ]\n    T.eq text_result, text_matcher\n    T.eq S.MACRO_ESCAPER[ 'registry' ], registry_matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.escape.bracketed_raw_macros\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"some text here<<!foo>>and some there\",\"some text here<<!foo>>and some there\",[]]\n    [\"abcd<<<some raw content>>>efg\",\"abcd\\u0015raw0\\u0013efg\",[{\"key\":\"raw0\",\"markup\":\"<\",\"raw\":\"some raw content\",\"parsed\":null}]]\n    [\"abcd\\\\<<<some raw content>>>efg\",\"abcd\\\\<<<some raw content>>>efg\",[]]\n    ]\n  for [ probe, text_matcher, registry_matcher, ] in probes_and_matchers\n    S = MKTS.MACRO_ESCAPER.initialize_state {}\n    text_result = MKTS.MACRO_ESCAPER.escape.bracketed_raw_macros S, probe\n    help JSON.stringify [ probe, text_result, S.MACRO_ESCAPER[ 'registry' ], ]\n    T.eq text_result, text_matcher\n    T.eq S.MACRO_ESCAPER[ 'registry' ], registry_matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.escape.region_macros\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"some text here <<(>><<)>>\",\"some text here \\u0015region0\\u0013\\u0015region1\\u0013\",[{\"key\":\"region0\",\"markup\":\"(\",\"raw\":\"\",\"parsed\":null},{\"key\":\"region1\",\"markup\":\")\",\"raw\":\"\",\"parsed\":null}]]\n    [\"some text here <<(em>><<)>>\",\"some text here \\u0015region0\\u0013\\u0015region1\\u0013\",[{\"key\":\"region0\",\"markup\":\"(\",\"raw\":\"em\",\"parsed\":null},{\"key\":\"region1\",\"markup\":\")\",\"raw\":\"\",\"parsed\":null}]]\n    [\"some text here <<(em>>and some there<<)>><<(more>>markup<<)>>\",\"some text here \\u0015region0\\u0013and some there\\u0015region2\\u0013\\u0015region1\\u0013markup\\u0015region3\\u0013\",[{\"key\":\"region0\",\"markup\":\"(\",\"raw\":\"em\",\"parsed\":null},{\"key\":\"region1\",\"markup\":\"(\",\"raw\":\"more\",\"parsed\":null},{\"key\":\"region2\",\"markup\":\")\",\"raw\":\"\",\"parsed\":null},{\"key\":\"region3\",\"markup\":\")\",\"raw\":\"\",\"parsed\":null}]]\n    [\"some text here <<(em>>and some there<<foo)>>\",\"some text here \\u0015region0\\u0013and some there\\u0015region1\\u0013\",[{\"key\":\"region0\",\"markup\":\"(\",\"raw\":\"em\",\"parsed\":null},{\"key\":\"region1\",\"markup\":\")\",\"raw\":\"foo\",\"parsed\":null}]]\n    ]\n  for [ probe, text_matcher, registry_matcher, ] in probes_and_matchers\n    S = MKTS.MACRO_ESCAPER.initialize_state {}\n    text_result = MKTS.MACRO_ESCAPER.escape.region_macros S, probe\n    # log CND.white rpr probe\n    # urge rpr text_result\n    help JSON.stringify [ probe, text_result, S.MACRO_ESCAPER[ 'registry' ], ]\n    T.eq text_result, text_matcher\n    T.eq S.MACRO_ESCAPER[ 'registry' ], registry_matcher\n  # T.fail 'not ready'\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.escape.action_macros\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"<<(.>><<)>>\",\"\\u0015action0\\u0013\",[{\"key\":\"action0\",\"markup\":[\"silent\",\"coffee\"],\"raw\":\"\",\"parsed\":null}]]\n    [\"<<(.>><<.)>>\",\"\\u0015action0\\u0013\",[{\"key\":\"action0\",\"markup\":[\"silent\",\"coffee\"],\"raw\":\"\",\"parsed\":null}]]\n    [\"<<(.>>xxx<<)>>\",\"\\u0015action0\\u0013\",[{\"key\":\"action0\",\"markup\":[\"silent\",\"coffee\"],\"raw\":\"xxx\",\"parsed\":null}]]\n    [\"<<(.>>xxx<<.)>>\",\"\\u0015action0\\u0013\",[{\"key\":\"action0\",\"markup\":[\"silent\",\"coffee\"],\"raw\":\"xxx\",\"parsed\":null}]]\n    [\"<<(.>>some code<<)>>\",\"\\u0015action0\\u0013\",[{\"key\":\"action0\",\"markup\":[\"silent\",\"coffee\"],\"raw\":\"some code\",\"parsed\":null}]]\n    [\"<<(.>>some code<<.)>>\",\"\\u0015action0\\u0013\",[{\"key\":\"action0\",\"markup\":[\"silent\",\"coffee\"],\"raw\":\"some code\",\"parsed\":null}]]\n    [\"abc<<(.>>4 + 3<<)>>def\",\"abc\\u0015action0\\u0013def\",[{\"key\":\"action0\",\"markup\":[\"silent\",\"coffee\"],\"raw\":\"4 + 3\",\"parsed\":null}]]\n    [\"<<(:>><<)>>\",\"\\u0015action0\\u0013\",[{\"key\":\"action0\",\"markup\":[\"vocal\",\"coffee\"],\"raw\":\"\",\"parsed\":null}]]\n    [\"<<(:>>xxx<<)>>\",\"\\u0015action0\\u0013\",[{\"key\":\"action0\",\"markup\":[\"vocal\",\"coffee\"],\"raw\":\"xxx\",\"parsed\":null}]]\n    [\"<<(:>>some code<<)>>\",\"\\u0015action0\\u0013\",[{\"key\":\"action0\",\"markup\":[\"vocal\",\"coffee\"],\"raw\":\"some code\",\"parsed\":null}]]\n    [\"abc<<(:>>4 + 3<<)>>def\",\"abc\\u0015action0\\u0013def\",[{\"key\":\"action0\",\"markup\":[\"vocal\",\"coffee\"],\"raw\":\"4 + 3\",\"parsed\":null}]]\n    [\"abc<<(:>>bitfield \\\\>> 1 <<)>>def\",\"abc\\u0015action0\\u0013def\",[{\"key\":\"action0\",\"markup\":[\"vocal\",\"coffee\"],\"raw\":\"bitfield \\\\>> 1 \",\"parsed\":null}]]\n    [\"abc<<(:>>bitfield >\\\\> 1 <<)>>def\",\"abc\\u0015action0\\u0013def\",[{\"key\":\"action0\",\"markup\":[\"vocal\",\"coffee\"],\"raw\":\"bitfield >\\\\> 1 \",\"parsed\":null}]]\n    [\"abc<<(:js>>4 + 3<<)>>def\",\"abc\\u0015action0\\u0013def\",[{\"key\":\"action0\",\"markup\":[\"vocal\",\"js\"],\"raw\":\"4 + 3\",\"parsed\":null}]]\n    [\"abc<<(.js>>4 + 3<<)>>def\",\"abc\\u0015action0\\u0013def\",[{\"key\":\"action0\",\"markup\":[\"silent\",\"js\"],\"raw\":\"4 + 3\",\"parsed\":null}]]\n    [\"abc<<(:js>>4 + 3<<:js)>>def\",\"abc\\u0015action0\\u0013def\",[{\"key\":\"action0\",\"markup\":[\"vocal\",\"js\"],\"raw\":\"4 + 3\",\"parsed\":null}]]\n    [\"abc<<(.js>>4 + 3<<.js)>>def\",\"abc\\u0015action0\\u0013def\",[{\"key\":\"action0\",\"markup\":[\"silent\",\"js\"],\"raw\":\"4 + 3\",\"parsed\":null}]]\n    [\"abc<<(:js>>4 + 3<<:)>>def\",\"abc<<(:js>>4 + 3<<:)>>def\",[]]\n    [\"abc<<(.js>>4 + 3<<.)>>def\",\"abc<<(.js>>4 + 3<<.)>>def\",[]]\n    ]\n  for [ probe, text_matcher, registry_matcher, ] in probes_and_matchers\n    S = MKTS.MACRO_ESCAPER.initialize_state {}\n    text_result = MKTS.MACRO_ESCAPER.escape.action_macros S, probe\n    # log CND.white rpr probe\n    # urge rpr text_result\n    help JSON.stringify [ probe, text_result, S.MACRO_ESCAPER[ 'registry' ], ]\n    T.eq text_result, text_matcher\n    T.eq S.MACRO_ESCAPER[ 'registry' ], registry_matcher\n  # debug '', MKTS.MACRO_ESCAPER.action_and_region_patterns[ 0 ]\n  # debug '', MKTS.MACRO_ESCAPER.action_and_region_patterns[ 1 ]\n  # T.fail 'not ready'\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.escape.command_and_value_macros\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"some text here <<!foo>> and some there\",\"some text here \\u0015command0\\u0013 and some there\",[{\"key\":\"command0\",\"markup\":\"!\",\"raw\":\"foo\",\"parsed\":null}]]\n    [\"some text here <<$foo>> and some there\",\"some text here \\u0015value0\\u0013 and some there\",[{\"key\":\"value0\",\"markup\":\"$\",\"raw\":\"foo\",\"parsed\":null}]]\n    [\"some text here \\\\<<!foo>> and some there\",\"some text here \\\\<<!foo>> and some there\",[]]\n    [\"some text here \\\\<<$foo>> and some there\",\"some text here \\\\<<$foo>> and some there\",[]]\n    [\"some text here<!-- omit this --> and some there\",\"some text here<!-- omit this --> and some there\",[]]\n    [\"abcd<<<some raw content>>>efg\",\"abcd<<<some raw content>>>efg\",[]]\n    ]\n  for [ probe, text_matcher, registry_matcher, ] in probes_and_matchers\n    S = MKTS.MACRO_ESCAPER.initialize_state {}\n    text_result = MKTS.MACRO_ESCAPER.escape.command_and_value_macros S, probe\n    help JSON.stringify [ probe, text_result, S.MACRO_ESCAPER[ 'registry' ], ]\n    T.eq text_result, text_matcher\n    T.eq S.MACRO_ESCAPER[ 'registry' ], registry_matcher\n  done()\n\n# # # #-----------------------------------------------------------------------------------------------------------\n# # # @[ \"MKTS.MACRO_ESCAPER.escape 1\" ] = ( T, done ) ->\n# # #   probes_and_matchers = [\n# # #     [\"<<(multi-column 3>>\\nsome text here<!-- omit this --> and some there\\n<<)>>\\n<<(multi-column 2>>\\nThis text will appear in two-column<!-- omit this --> layout.\\n<!--some code-->\\n<<(:>>some code<<)>>\\n<<)>>\\n<<!end>>\\n<<!command>><<(:action>><<)>>\",\"\\u0015region4\\u0013\\nsome text here\\u0015comment0\\u0013 and some there\\n\\u0015region5\\u0013\\n\\u0015region6\\u0013\\nThis text will appear in two-column\\u0015comment1\\u0013 layout.\\n\\u0015comment2\\u0013\\n\\u0015action3\\u0013\\n\\u0015region7\\u0013\\n\",[{\"key\":\"comment0\",\"markup\":null,\"raw\":\" omit this \",\"parsed\":\"omit this\"},{\"key\":\"comment1\",\"markup\":null,\"raw\":\" omit this \",\"parsed\":\"omit this\"},{\"key\":\"comment2\",\"markup\":null,\"raw\":\"some code\",\"parsed\":\"some code\"},{\"key\":\"action3\",\"markup\":[\"vocal\",\"coffee\"],\"raw\":\"some code\",\"parsed\":null},{\"key\":\"region4\",\"markup\":\"multi-column 3\",\"raw\":\"<<(multi-column 3>>\",\"parsed\":null},{\"key\":\"region5\",\"markup\":\"multi-column 3\",\"raw\":\"<<)>>\",\"parsed\":null},{\"key\":\"region6\",\"markup\":\"multi-column 2\",\"raw\":\"<<(multi-column 2>>\",\"parsed\":null},{\"key\":\"region7\",\"markup\":\"multi-column 2\",\"raw\":\"<<)>>\",\"parsed\":null}]]\n# # #     ]\n# # #   for [ probe, text_matcher, registry_matcher, ] in probes_and_matchers\n# # #     S = MKTS.MACRO_ESCAPER.initialize_state {}\n# # #     text_result = MKTS.MACRO_ESCAPER.escape S, probe\n# # #     help JSON.stringify [ probe, text_result, S.MACRO_ESCAPER[ 'registry' ], ]\n# # #     T.eq text_result, text_matcher\n# # #     T.eq S.MACRO_ESCAPER[ 'registry' ], registry_matcher\n# # #   done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.escape 2\" ] = ( T, done ) ->\n  probes_and_matchers = [[\n    \"\"\"<<(multi-column 3>>\n      some text here<!-- HTML comment 1 --> and some there\n      <<)>>\n      <<(multi-column 2>>\n      This text will appear in two-column<!-- HTML comment 2 --> layout.\n      <<(:>>some code<<)>>\n      <<)>>\n      <<!end>>\n      <<!command>><<(:action>><<)>>\n      \"\"\"\n    ,\n      \"\"\"\\x15region3\\x13\n      some text here\\x15comment0\\x13 and some there\n      \\x15region5\\x13\n      \\x15region4\\x13\n      This text will appear in two-column\\x15comment1\\x13 layout.\n      \\x15action2\\x13\n      \\x15region6\\x13\\n\"\"\"\n    ,\n      [\n        {\"key\":\"comment0\",\"markup\":null,\"raw\":\" HTML comment 1 \",\"parsed\":\"HTML comment 1\"}\n        {\"key\":\"comment1\",\"markup\":null,\"raw\":\" HTML comment 2 \",\"parsed\":\"HTML comment 2\"}\n        {\"key\":\"action2\",\"markup\":[\"vocal\",\"coffee\"],\"raw\":\"some code\",\"parsed\":null}\n        {\"key\":\"region3\",\"markup\":\"(\",\"raw\":\"multi-column 3\",\"parsed\":null}\n        {\"key\":\"region4\",\"markup\":\"(\",\"raw\":\"multi-column 2\",\"parsed\":null}\n        {\"key\":\"region5\",\"markup\":\")\",\"raw\":\"\",\"parsed\":null}\n        {\"key\":\"region6\",\"markup\":\")\",\"raw\":\"\",\"parsed\":null}\n        ]\n      ]]\n  for [ probe, text_matcher, registry_matcher, ] in probes_and_matchers\n    S = MKTS.MACRO_ESCAPER.initialize_state {}\n    text_result = MKTS.MACRO_ESCAPER.escape S, probe\n    urge nice_text_rpr probe\n    info nice_text_rpr text_result\n    help JSON.stringify entry for entry in S.MACRO_ESCAPER[ 'registry' ]\n    T.eq text_result,             text_matcher\n    T.eq S.MACRO_ESCAPER[ 'registry' ],  registry_matcher\n  # T.fail \"not ready\"\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.$expand_html_comments\" ] = ( T, done ) ->\n  probes_and_matchers = [[\n    \"\"\"<<(multi-column 3>>\n      some text here<!-- HTML comment 1 --> and some there\n      <<)>>\n      <<(multi-column 2>>\n      This text will appear in two-column<!-- HTML comment 2 --> layout.\n      <<(:>>some code<<)>>\n      <<)>>\n      <<!end>>\n      <<!command>><<(:action>><<)>>\n      \"\"\"\n    ,\n      [\n        [\".\",\"text\",\"\\u0015region3\\u0013\\nsome text here\",{}]\n        [\".\",\"comment\",\" HTML comment 1 \",{}]\n        [\".\",\"text\",\" and some there\\n\\u0015region5\\u0013\\n\\u0015region4\\u0013\\nThis text will appear in two-column\",{}]\n        [\".\",\"comment\",\" HTML comment 2 \",{}]\n        [\".\",\"text\",\" layout.\\n\\u0015action2\\u0013\\n\\u0015region6\\u0013\\n\",{}]\n      ]\n      ]]\n  for [ pre_probe, matcher, ] in probes_and_matchers\n    S       = MKTS.MACRO_ESCAPER.initialize_state {}\n    probe   = MKTS.MACRO_ESCAPER.escape S, pre_probe\n    input   = D.stream_from_text probe\n    stream  = input\n      .pipe $ ( text, send ) =>\n        send [ '.', 'text', text, {}, ]\n    D.call_transform stream, ( => MKTS.MACRO_ESCAPER.$expand_html_comments S ), ( error, result ) =>\n      log CND.white JSON.stringify event for event in result\n      T.eq result, matcher\n      done()\n    input.resume()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.$expand_action_macros\" ] = ( T, done ) ->\n  probes_and_matchers = [[\n    \"\"\"some text with <<(:>>vocal action<<)>>.\n      <<(.js>>and( \"a silent action\" )<<.js)>>\n      \"\"\"\n  ,\n    [\n      [\".\",\"text\",\"some text with \",{}]\n      [\".\",\"action\",\"vocal action\",{\"mode\":\"vocal\",\"language\":\"coffee\"}]\n      [\".\",\"text\",\".\\n\",{}]\n      [\".\",\"action\",\"and( \\\"a silent action\\\" )\",{\"mode\":\"silent\",\"language\":\"js\"}]\n      ]\n    ]]\n  for [ pre_probe, matcher, ] in probes_and_matchers\n    S       = MKTS.MACRO_ESCAPER.initialize_state {}\n    probe   = MKTS.MACRO_ESCAPER.escape S, pre_probe\n    input   = D.stream_from_text probe\n    stream  = input\n      .pipe $ ( text, send ) =>\n        send [ '.', 'text', text, {}, ]\n    D.call_transform stream, ( => MKTS.MACRO_ESCAPER.$expand_action_macros S ), ( error, result ) =>\n      log CND.white JSON.stringify event for event in result\n      T.eq result, matcher\n      # T.fail \"not ready\"\n      done()\n    input.resume()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.$expand_raw_macros\" ] = ( T, done ) ->\n  probes_and_matchers = [[\n    \"\"\"<<(multi-column 3>>\n      some text here<<<\\\\LaTeX{}>>> and some there\n      <<)>>\n      \"\"\"\n  ,\n    [\n      [\".\",\"text\",\"\\u0015region1\\u0013\\nsome text here\",{}]\n      [\".\",\"raw\",\"\\\\LaTeX{}\",{}]\n      [\".\",\"text\",\" and some there\\n\\u0015region2\\u0013\",{}]\n      ]\n    ]]\n  for [ pre_probe, matcher, ] in probes_and_matchers\n    S       = MKTS.MACRO_ESCAPER.initialize_state {}\n    probe   = MKTS.MACRO_ESCAPER.escape S, pre_probe\n    input   = D.stream_from_text probe\n    stream  = input\n      .pipe $ ( text, send ) =>\n        send [ '.', 'text', text, {}, ]\n    D.call_transform stream, ( => MKTS.MACRO_ESCAPER.$expand_raw_macros S ), ( error, result ) =>\n      log CND.white JSON.stringify event for event in result\n      T.eq result, matcher\n      # T.fail \"not ready\"\n      done()\n    input.resume()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.$expand_command_and_value_macros\" ] = ( T, done ) ->\n  probes_and_matchers = [[\n    \"\"\"<<(multi-column 3>>\n      a command <<!LATEX>> and a value <<$pagenr>>.\n      <<)>>\n      \"\"\"\n  ,\n    [\n      [\".\",\"text\",\"\\u0015region0\\u0013\\na command \",{}]\n      [\".\",\"command\",\"LATEX\",{}]\n      [\".\",\"text\",\" and a value \",{}]\n      [\".\",\"value\",\"pagenr\",{}]\n      [\".\",\"text\",\".\\n\\u0015region1\\u0013\",{}]\n      ]\n    ]]\n  for [ pre_probe, matcher, ] in probes_and_matchers\n    S       = MKTS.MACRO_ESCAPER.initialize_state {}\n    probe   = MKTS.MACRO_ESCAPER.escape S, pre_probe\n    # debug '', S\n    input   = D.stream_from_text probe\n    stream  = input\n      .pipe $ ( text, send ) =>\n        send [ '.', 'text', text, {}, ]\n    D.call_transform stream, ( => MKTS.MACRO_ESCAPER.$expand_command_and_value_macros S ), ( error, result ) =>\n      log CND.white JSON.stringify event for event in result\n      T.eq result, matcher\n      # T.fail \"not ready\"\n      done()\n    input.resume()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MACRO_ESCAPER.$expand_region_macros\" ] = ( T, done ) ->\n  probes_and_matchers = [[\n    \"\"\"<<(multi-column 3>>\n      some text here<!-- omit this --> and some there\n      <<)>>\n      <<(multi-column 2>>\n      This text will appear in two-column<!-- omit this --> layout.\n      <!--some code-->\n      <<(:>>some code<<)>>\n      <<)>>\n      <<!end>>\n      <<!command>><<(:action>><<)>>\n      \"\"\"\n  ,\n    [\n      [\"(\",\"multi-column 3\",null,{}]\n      [\".\",\"text\",\"\\nsome text here\\u0015comment0\\u0013 and some there\\n\",{}]\n      [\")\",\"\",null,{}]\n      [\".\",\"text\",\"\\n\",{}]\n      [\"(\",\"multi-column 2\",null,{}]\n      [\".\",\"text\",\"\\nThis text will appear in two-column\\u0015comment1\\u0013 layout.\\n\\u0015comment2\\u0013\\n\\u0015action3\\u0013\\n\",{}]\n      [\")\",\"\",null,{}]\n      [\".\",\"text\",\"\\n\",{}]\n      ]\n    ]]\n  for [ pre_probe, matcher, ] in probes_and_matchers\n    S       = MKTS.MACRO_ESCAPER.initialize_state {}\n    probe   = MKTS.MACRO_ESCAPER.escape S, pre_probe\n    input   = D.stream_from_text probe\n    stream  = input\n      .pipe $ ( text, send ) =>\n        send [ '.', 'text', text, {}, ]\n    D.call_transform stream, ( => MKTS.MACRO_ESCAPER.$expand_region_macros S ), ( error, result ) =>\n      log CND.white JSON.stringify event for event in result\n      T.eq result, matcher\n      # T.fail \"not ready\"\n      done()\n    input.resume()\n\n### # # # ###\n### # # # ###\n### # # # ###\n### # # # ###\n### # # # ###\n### # # # ###\n### # # # ###\n### # # # ###\n### # # # ###\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MD_READER.FENCES.parse accepts dot patterns\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [ '.',     [ '.', null,   null, ], ]\n    [ '.p',    [ '.', 'p',    null, ], ]\n    [ '.text', [ '.', 'text', null, ], ]\n    ]\n  for [ probe, matcher, ] in probes_and_matchers\n    # help ( rpr probe ), MKTS.MD_READER.FENCES.parse probe\n    T.eq ( MKTS.MD_READER.FENCES.parse probe ), matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MD_READER.FENCES.parse accepts empty fenced patterns\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    # [ '<>', [ '<', null, '>', ], ]\n    # [ '{}', [ '{', null, '}', ], ]\n    # [ '[]', [ '[', null, ']', ], ]\n    [ '()', [ '(', null, ')', ], ]\n    ]\n  for [ probe, matcher, ] in probes_and_matchers\n    # help ( rpr probe ), MKTS.MD_READER.FENCES.parse probe\n    T.eq ( MKTS.MD_READER.FENCES.parse probe ), matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MD_READER.FENCES.parse accepts unfenced named patterns\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [ 'document',       [ null, 'document',     null, ], ]\n    [ 'singlecolumn',   [ null, 'singlecolumn', null, ], ]\n    [ 'code',           [ null, 'code',         null, ], ]\n    [ 'blockquote',     [ null, 'blockquote',   null, ], ]\n    [ 'em',             [ null, 'em',           null, ], ]\n    [ 'xxx',            [ null, 'xxx',          null, ], ]\n    ]\n  for [ probe, matcher, ] in probes_and_matchers\n    # help ( rpr probe ), MKTS.MD_READER.FENCES.parse probe\n    T.eq ( MKTS.MD_READER.FENCES.parse probe ), matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MD_READER.FENCES.parse accepts fenced named patterns\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    # [ '<document>',     [ '<', 'document',     '>', ], ]\n    # [ '{singlecolumn}', [ '{', 'singlecolumn', '}', ], ]\n    # [ '{code}',         [ '{', 'code',         '}', ], ]\n    # [ '[blockquote]',   [ '[', 'blockquote',   ']', ], ]\n    [ '(em)',           [ '(', 'em',           ')', ], ]\n    ]\n  for [ probe, matcher, ] in probes_and_matchers\n    # help ( rpr probe ), MKTS.MD_READER.FENCES.parse probe\n    T.eq ( MKTS.MD_READER.FENCES.parse probe ), matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MD_READER.FENCES.parse rejects empty string\" ] = ( T, done ) ->\n  T.throws \"pattern must be non-empty, got ''\", ( -> MKTS.MD_READER.FENCES.parse '' )\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MD_READER.FENCES.parse rejects non-matching fences etc\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"(xxx}\",\"unmatched fence in '(xxx}'\"]\n    [\".)\",\"fence '.' can not have right fence, got '.)'\"]\n    [\".p)\",\"fence '.' can not have right fence, got '.p)'\"]\n    [\"(xxx\",\"unmatched fence in '(xxx'\"]\n    [\"(\",\"unmatched fence in '('\"]\n    ]\n  for [ probe, matcher, ] in probes_and_matchers\n    try\n      debug '', JSON.stringify [ probe, MKTS.MD_READER.FENCES.parse probe ]\n    catch error\n      warn '', JSON.stringify [ probe, error[ 'message' ], ]\n    T.throws matcher, ( -> MKTS.MD_READER.FENCES.parse probe )\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MD_READER.FENCES.parse accepts non-matching fences when so configured\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [ '(em)',           [ '(', 'em',           ')', ], ]\n    [ 'em)',            [ null, 'em',           ')', ], ]\n    [ '(em',            [ '(', 'em',           null, ], ]\n    ]\n  for [ probe, matcher, ] in probes_and_matchers\n    # help ( rpr probe ), MKTS.MD_READER.FENCES.parse probe\n    T.eq ( MKTS.MD_READER.FENCES.parse probe, symmetric: no ), matcher\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MD_READER.TRACKER.new_tracker().track rejects unregistered pattern\" ] = ( T, done ) ->\n  track = MKTS.MD_READER.TRACKER.new_tracker '(code)', '(em)'\n  T.throws \"untracked pattern '(code-span)'\", ( => track.within '(code-span)' )\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MD_READER.TRACKER.new_tracker (short comprehensive test)\" ] = ( T, done ) ->\n  track = MKTS.MD_READER.TRACKER.new_tracker '(code-span)', '(em)'\n  probes_and_matchers = [\n    [[\"(\",\"code-span\"],[true,false]]\n    [[\"(\",\"em\"],[true,true]]\n    [[\".\",\"text\"],[true,true]]\n    [[\")\",\"em\"],[true,false]]\n    [[\".\",\"text\"],[true,false]]\n    [[\")\",\"code-span\"],[false,false]]\n    [[\".\",\"text\"],[false,false]]\n    ]\n  for [ probe, matcher, ] in probes_and_matchers\n    track probe\n    within_code_span  = track.within '(code-span)'\n    within_em         = track.within '(em)'\n    help JSON.stringify [ probe, [ within_code_span, within_em, ], ]\n    T.eq ( track.within '(code-span)' ), matcher[0 ]\n    T.eq ( track.within '(em)'        ), matcher[1 ]\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mkts_events_from_md (1)\" ] = ( T, done ) ->\n  # settings  = bare: yes\n  probe     = \"\"\"123 `abc<<(:>>vocal action<<)>>def` 456\"\"\"\n  warn \"should merge texts\"\n  matcher   = [\n    [\"(\",\"document\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\".\",\"text\",\"123 \",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\"(\",\"code-span\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"`\"}]\n    [\".\",\"text\",\"abc\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\".\",\"action\",\"vocal action\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\",\"mode\":\"vocal\",\"language\":\"coffee\",\"hidden\":true,\"stamped\":true}]\n    [\".\",\"warning\",\"line 1: vocal is not defined\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\",\"mode\":\"vocal\",\"language\":\"coffee\",\"hidden\":false,\"stamped\":false}]\n    [\".\",\"text\",\"def\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\")\",\"code-span\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"`\"}]\n    [\".\",\"text\",\" 456\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\")\",\"document\",null,{}]\n    ]\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mkts_events_from_md probe, resume\n    show_events probe, result\n    T.eq matcher, result\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mkts_events_from_md (2)\" ] = ( T, done ) ->\n  settings  = bare: yes\n  # probe     = \"\"\"abc<<(:js>>f( 42 );<<:js)>>def\"\"\"\n  probe     = \"\"\"abc<<(:js>>42;<<:js)>>def\"\"\"\n  warn \"should merge texts\"\n  matcher   = [\n    [\".\",\"text\",\"abc\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\".\",\"action\",\"42;\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\",\"mode\":\"vocal\",\"language\":\"js\",\"hidden\":true,\"stamped\":true}]\n    [\".\",\"text\",\"42\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\",\"mode\":\"vocal\",\"language\":\"js\",\"hidden\":true,\"stamped\":true}]\n    [\".\",\"text\",\"def\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    ]\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mkts_events_from_md probe, settings, resume\n    show_events probe, result\n    T.eq matcher, result\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mkts_events_from_md (3)\" ] = ( T, done ) ->\n  settings  = bare: yes\n  probe     = \"\"\"abc\\\\<<(:js>>f( 42 );<<:js)>>def\"\"\"\n  warn \"should merge texts\"\n  matcher   = [\n    [\".\",\"text\",\"abc<<(:js>>f( 42 );<<:js)>>def\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    ]\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mkts_events_from_md probe, settings, resume\n    show_events probe, result\n    T.eq matcher, result\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mkts_events_from_md (4)\" ] = ( T, done ) ->\n  settings  = bare: no\n  probe     = \"\"\"<<!end>>\"\"\"\n  warn \"match remark?\"\n  matcher   = [\n    [\"(\",\"document\",null,{}]\n    [\".\",\"command\",\"empty-document\",{}]\n    [\")\",\"document\",null,{}]\n    ]\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mkts_events_from_md probe, settings, resume\n    show_events probe, result\n    T.eq matcher, result\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mkts_events_from_md (5)\" ] = ( T, done ) ->\n  settings  = bare: yes\n  probe     = \"\"\"<<!multi-column>>\"\"\"\n  warn \"should not contain `.p`\"\n  matcher   = [\n    [\".\",\"command\",\"multi-column\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    ]\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mkts_events_from_md probe, settings, resume\n    show_events probe, result\n    T.eq matcher, result\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mkts_events_from_md (6)\" ] = ( T, done ) ->\n  settings  = bare: yes\n  probe     = \"\"\"\n    aaa\n    <<(multi-column>>\n    bbb\n    <<multi-column)>>\n    ccc\n    \"\"\"\n  warn \"missing `.p` inside `(multi-column)`\"\n  matcher   = [\n    [\".\",\"text\",\"aaa\\n\",{\"line_nr\":1,\"col_nr\":6,\"markup\":\"\"}]\n    [\"(\",\"multi-column\",null,{\"line_nr\":1,\"col_nr\":6,\"markup\":\"\"}]\n    [\".\",\"text\",\"\\nbbb\\n\",{\"line_nr\":1,\"col_nr\":6,\"markup\":\"\"}]\n    [\")\",\"multi-column\",null,{\"line_nr\":1,\"col_nr\":6,\"markup\":\"\"}]\n    [\".\",\"text\",\"\\nccc\",{\"line_nr\":1,\"col_nr\":6,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":1,\"col_nr\":6,\"markup\":\"\"}]\n    ]\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mkts_events_from_md probe, settings, resume\n    show_events probe, result\n    T.eq matcher, result\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mkts_events_from_md (7)\" ] = ( T, done ) ->\n  settings  = bare: yes\n  probe     = \"\"\"\n    \n    \"\"\"\n  # warn \"missing `.p` inside `(multi-column)`\"\n  matcher   = [\n    [\".\",\"text\",\"\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    ]\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mkts_events_from_md probe, settings, resume\n    show_events probe, result\n    T.eq matcher, result\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mkts_events_from_md (8)\" ] = ( T, done ) ->\n  settings  = bare: yes\n  probe     = \"\"\"\n    A paragraph with *emphasis*.\n\n    A paragraph with **bold text**.\n    \"\"\"\n  # warn \"missing `.p` inside `(multi-column)`\"\n  matcher   = [\n    [\".\",\"text\",\"A paragraph with \",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\"(\",\"em\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"*\"}]\n    [\".\",\"text\",\"emphasis\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\")\",\"em\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"*\"}]\n    [\".\",\"text\",\".\",{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":1,\"col_nr\":2,\"markup\":\"\"}]\n    [\".\",\"text\",\"A paragraph with \",{\"line_nr\":3,\"col_nr\":4,\"markup\":\"\"}]\n    [\"(\",\"strong\",null,{\"line_nr\":3,\"col_nr\":4,\"markup\":\"**\"}]\n    [\".\",\"text\",\"bold text\",{\"line_nr\":3,\"col_nr\":4,\"markup\":\"\"}]\n    [\")\",\"strong\",null,{\"line_nr\":3,\"col_nr\":4,\"markup\":\"**\"}]\n    [\".\",\"text\",\".\",{\"line_nr\":3,\"col_nr\":4,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":3,\"col_nr\":4,\"markup\":\"\"}]\n    ]\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mkts_events_from_md probe, settings, resume\n    show_events probe, result\n    T.eq matcher, result\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mkts_events_from_md: footnotes\" ] = ( T, done ) ->\n  settings  = bare: yes\n  probe     = \"\"\"\n    Here is an inline footnote^[whose text appears at the point of insertion],\n    followed by a referenced footnote[^1].\n\n    [^1]: Referenced footnotes must use matching references.\n    \"\"\"\n  # warn \"missing `.p` inside `(multi-column)`\"\n  matcher   = [\n    [\".\",\"text\",\"Here is an inline footnote\",{\"line_nr\":1,\"col_nr\":3,\"markup\":\"\"}]\n    [\"(\",\"footnote\",0,{\"line_nr\":1,\"col_nr\":3,\"markup\":\"\"}]\n    [\".\",\"text\",\"whose text appears at the point of insertion\",{\"line_nr\":1,\"col_nr\":3,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":1,\"col_nr\":3,\"markup\":\"\"}]\n    [\")\",\"footnote\",0,{\"line_nr\":1,\"col_nr\":3,\"markup\":\"\"}]\n    [\".\",\"text\",\",\\nfollowed by a referenced footnote\",{\"line_nr\":1,\"col_nr\":3,\"markup\":\"\"}]\n    [\"(\",\"footnote\",1,{\"line_nr\":1,\"col_nr\":3,\"markup\":\"\"}]\n    [\".\",\"text\",\"Referenced footnotes must use matching references.\",{\"line_nr\":4,\"col_nr\":5,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":4,\"col_nr\":5,\"markup\":\"\"}]\n    [\")\",\"footnote\",1,{\"line_nr\":1,\"col_nr\":3,\"markup\":\"\"}]\n    [\".\",\"text\",\".\",{\"line_nr\":1,\"col_nr\":3,\"markup\":\"\"}]\n    [\".\",\"p\",null,{\"line_nr\":1,\"col_nr\":3,\"markup\":\"\"}]\n    ]\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mkts_events_from_md probe, settings, resume\n    show_events probe, result\n    T.eq matcher, result\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.TEX_WRITER.tex_from_md (1)\" ] = ( T, done ) ->\n  settings  = bare: yes\n  probe     = \"\"\"\n    A paragraph with *emphasis*.\n\n    A paragraph with **bold text**.\n    \"\"\"\n  # warn \"missing `.p` inside `(multi-column)`\"\n  matcher   = \"\"\"\n    % begin of MD document\n    A paragraph with {\\\\mktsStyleItalic{}emphasis\\\\/}.\\\\mktsShowpar\\\\par\n    A paragraph with {\\\\mktsStyleBold{}bold text}.\\\\mktsShowpar\\\\par\n\n    % end of MD document\n\n    \"\"\"\n  step ( resume ) =>\n    result = yield MKTS.TEX_WRITER.tex_from_md probe, settings, resume\n    echo result\n    T.eq matcher.trim(), result.trim()\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mktscript_from_md (1)\" ] = ( T, done ) ->\n  settings  = bare: yes\n  probe     = \"\"\"\n    A paragraph with *emphasis*.\n\n    A paragraph with **bold text**.\n\n    Using <foo>HTML tags **inhibits** MD syntax</foo>.\n    \"\"\"\n  # warn \"missing `.p` inside `(multi-column)`\"\n  matcher   = \"\"\"\n    1  (document\n    1  .text 'A paragraph with '\n    1  (em\n    1  .text 'emphasis'\n    1  )em\n    1  .text '.'\n    1  .p\n    3  .text 'A paragraph with '\n    3  (strong\n    3  .text 'bold text'\n    3  )strong\n    3  .text '.'\n    3  .p\n    5  .text 'Using '\n    5  (foo\n    5  .text 'HTML tags '\n    5  (strong\n    5  .text 'inhibits'\n    5  )strong\n    5  .text ' MD syntax'\n    5  )foo\n    5  .text '.'\n    5  .p\n    )document\n    # EOF\n    \"\"\"\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mktscript_from_md probe, settings, resume\n    echo result\n    T.eq matcher.trim(), result.trim()\n    done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"MKTS.MKTSCRIPT_WRITER.mktscript_from_md (2)\" ] = ( T, done ) ->\n  settings  = bare: yes\n  probe     = \"\"\"\n    <<(multi-column>>\n\n    <div>B</div>\n\n    \"\"\"\n  # warn \"missing `.p` inside `(multi-column)`\"\n  matcher   = \"\"\"\n    1  (document\n    1  (multi-column\n    1  .p\n    1  (div\n    1  .text 'B'\n    1  )div\n    1  .p\n    #resend '`multi-column)`'\n    1  )multi-column\n    )document\n    # EOF\n    \"\"\"\n  step ( resume ) =>\n    result = yield MKTS.MKTSCRIPT_WRITER.mktscript_from_md probe, settings, resume\n    echo result\n    T.eq matcher.trim(), result.trim()\n    # T.fail \"not yet ready\"\n    done()\n\n\n#===========================================================================================================\n# MAIN\n#-----------------------------------------------------------------------------------------------------------\n@_main = ( handler ) ->\n  test @, 'timeout': 2500\n\n\n############################################################################################################\nunless module.parent?\n  @_main()\n\n"]}