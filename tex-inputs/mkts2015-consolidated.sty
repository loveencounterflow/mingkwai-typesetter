


% ==========================================================================================================
% Unicode and CJK Handling
% ----------------------------------------------------------------------------------------------------------
% ftp://ftp.tu-chemnitz.de/pub/tex/macros/latex/contrib/nag/nag.pdf
\RequirePackage[l2tabu, orthodox]{nag}

\usepackage{fontspec}
% \usepackage{/home/flow/own/tex-packages/xeCJK-2.4.6-r306/xeCJK}
% \usepackage{xeCJK}

% % Should fix CJK linebreaks as per http://tex.stackexchange.com/a/38276/28067
% % ### TAINT this setting should be made only available inside CJK text regions ###
% \XeTeXlinebreaklocale "ja"% for Japanese
% \XeTeXlinebreakskip 0pt plus 0.1pt% sets the skip

\usepackage{leading}
\usepackage{etextools}
\usepackage{array}
\usepackage{relsize}\renewcommand\RSlargest{100mm}\renewcommand\RSsmallest{0.1mm}
\usepackage{ragged2e}
\usepackage{needspace}
\usepackage[user,savepos]{zref}
% \usepackage{/Volumes/Storage/io/jizura-xelatex/tex-inputs/utils}
% \usepackage{/Users/flow/JIZURA/flow/dictionary/tex-inputs/accentbx/accentbx}
\usepackage{cxltx-style-accentbox}
\usepackage{cxltx-style-trm}
% \usepackage{longtable}
% \usepackage{pbox}
% \let\footruleskip\undefined\usepackage{fancyhdr}

% Package fixltx2e Warning: fixltx2e is not required with releases after 2015
% (fixltx2e)                All fixes are now in the LaTeX kernel.
% (fixltx2e)                See the latexrelease package for details.
% \usepackage{fixltx2e}

% \usepackage[usenames,dvipsnames,svgnames,table,x11names]{xcolor}
\usepackage[factor=1000]{microtype}
% ### TAINT need update for tracking:
% \usepackage[factor=1000,tracking=true]{microtype}
\usepackage{cxltx-style-base}
\usepackage{cxltx-style-trm}
% \usepackage{cxltx-style-accentbox}
\usepackage{cxltx-style-pushraise}
\usepackage{cxltx-style-hyphenation-tolerance}
\usepackage{cxltx-style-oddeven}
\usepackage{cxltx-style-position-absolute}
\usepackage{cxltx-style-pushraise}
\usepackage{cxltx-style-transform}
\usepackage{cxltx-style-smashbox}

% ### TAINT to be replaced with something else ###
\usepackage{cxltx-style-cjkglue}
% \newcommand{\cjkgUseCjkGlue}{}
% \newcommand{\cjkgGlue}{}
% \newcommand{\cjkgKeepLines}{}


% \usepackage[null]{mkts-base} % plain
% \usepackage[null]{mkts-endnotes}
% % \usepackage[null]{mkts-page-geometry} % a4
% \usepackage[null]{mkts-headers-and-footers} % jizura
\usepackage[jizura]{mkts-headers-and-footers}%  jizura
% \usepackage[null]{mkts-fontsets}
% \usepackage[null]{mkts-styles}
% \usepackage[null]{mkts-para-font-size} % plain
% \usepackage[null]{mkts-headings-and-toc}

\usepackage[plain]{mkts-base}%                  plain
\usepackage[default]{mkts-endnotes}%            default
% \usepackage[a4,cmgrid]{mkts-page-geometry}
% \usepackage[a4,baselines,ascenders,descenders]{mkts-page-geometry}
% \usepackage[a4,interbands,ascenders,baselines,descenders]{mkts-page-geometry}
% \usepackage[a4,ascenders,baselines,descenders]{mkts-page-geometry}
% \usepackage[a4,ascenders,descenders,baselines,columns]{mkts-page-geometry}
\usepackage[
  % cmgrid,
  % mmgrid,
  % linebands,
  % columns,
  % baselines,
  % debug,
  % debugorigin,
  % gutter,
  outerborders,
  innerborders,
  upperborders,
  lowerborders,
  a4]{mkts-page-geometry}%
% \usepackage[a4,outer,debug,debugcopy,linebands,cmgrid,mmgrid]{mkts-page-geometry}%            a4
% \usepackage[a4]{mkts-page-geometry}%            a4
\usepackage[default]{mkts-fontsets}%            default
\usepackage[default]{mkts-styles}%              default
\usepackage[plain]{mkts-para-font-size}%        plain
\usepackage[default]{mkts-headings-and-toc}%    default

% ----------------------------------------------------------------------------------------------------------
% consider this experimental; it doesn't do correct spacing, but lines look swell:
\newcommand{\mktsStyleBoxDrawing}{%
  \mktsFontfileDejavusansmono%
  % \color{red}%
  \mktsScaleFont{1.0}% looks strange, but is needed
  }

\newcommand{\mktsJzrVerticalbarInfix}{}%
\newcommand{\mktsJzrVerticalbarGlyph}{}%

  % ........................................................................................................
  \renewcommand{\mktsJzrVerticalbarInfix}{%
    {\color{red}\hspace{0.2em}\makebox(0,0){\rule[0.5em]{0.15mm}{1.25em}}\hspace{0.2em}}%
    % {\color{red}\hspace{0.2em}\rule[-0.4em]{0.15mm}{1.4em}\hspace{0.1em}}%
    % {\color{red}\rule[-0.4em]{0.15mm}{1.4em}}%
    }
  % ........................................................................................................
  \renewcommand{\mktsJzrVerticalbarGlyph}{%
    {\color{black}\hspace{0.2em}\rule[-0.4em]{0.15mm}{1.4em}\hspace{0.2em}}%
    }

\newcommand{\mktsJzrGlyphbraceLeft}{%
  {%
    \mktsFontfileSourcehansansheavy%
    \color{red}%
    \makebox[0mm]{「}%
    }%
  }

\newcommand{\mktsJzrGlyphbraceRight}{%
  {%
    \mktsFontfileSourcehansansheavy%
    \color{red}%
    \makebox[0mm]{」}%
    }%
  }

\newcommand{\mktsJzrGlyphdivider}{%
  {%
    \mktsFontfileHanamina%
    % \color{red}%
    % {\makebox(0,0){\rule[0em]{0.1mm}{1em}}}%
    \mktsScaleFont{0.2}%
    {\tfRaise{+0.85}\makebox(0,0){▼}}%
    {\tfRaise{-0.35}\makebox(0,0){▲}}%
    }%
  }

\newenvironment{mktsEnvBlockquote}{%
  \par%
  % \mktsStyleItalic%
  \setlength{\leftskip}{\mktsLineheight}%
  \setlength{\rightskip}{\mktsLineheight}%
  \mktsScaleFont{0.95}%
  % \setlength{\rightskip}{1em}%
  \ignorespaces}{%
  \par%
  }


% ==========================================================================================================
%
%        d8888  888     888  Y88b   d88P
%       d88888  888     888   Y88b d88P
%      d88P888  888     888    Y88o88P
%     d88P 888  888     888     Y888P
%    d88P  888  888     888     d888b
%   d88P   888  888     888    d88888b
%  d8888888888  Y88b. .d88P   d88P Y88b
% d88P     888   "Y88888P"   d88P   Y88b
%
% ==========================================================================================================
% routines for writing to .aux file
% this code copied from https://github.com/loveencounterflow/cxltx
\makeatletter
\catcode`\%=11
\newcommand{\aux}[1]{\immediate\write\@auxout{#1}}
\newcommand{\auxc}[1]{\immediate\write\@auxout{% #1}}
\catcode`\%=14
\makeatother


% ==========================================================================================================
%
% 8888888888  .d88888b.  888b    888 88888888888  .d8888b.
% 888        d88P" "Y88b 8888b   888     888     d88P  Y88b
% 888        888     888 88888b  888     888     Y88b.
% 8888888    888     888 888Y88b 888     888      "Y888b.
% 888        888     888 888 Y88b888     888         "Y88b.
% 888        888     888 888  Y88888     888           "888
% 888        Y88b. .d88P 888   Y8888     888     Y88b  d88P
% 888         "Y88888P"  888    Y888     888      "Y8888P"
%
% ==========================================================================================================
%


% ==========================================================================================================
% 2) Display Styles
% ----------------------------------------------------------------------------------------------------------
\newcommand{\adjustCjkIdeograph}[1]{\prRaise{-0.125}{#1}} % !!!
% \newcommand{\adjustJzrCjkIdeograph}[1]{\prRaise{-0.125}{#1}} % !!!
\newcommand{\adjustJzrCjkIdeograph}[1]{\prRaise{-0.125}{\makebox[1.1053\mktsFontsize]{#1}}} % !!!

% ..........................................................................................................
\newcommand{\latin}[1]{{\mktsFontfileEbgaramondtwelveregular#1}}
% \newcommand{\setPlainLatin}{\renewcommand{\latin}[1]{{\mktsFontfileEbgaramondtwelveregular#1}}}
% \newcommand{\setCodeLatin}{\renewcommand{\latin}[1]{{\mktsFontfileSunexta#1}}}
\newcommand{\py}{\mktsScaleFont{0.8}\mktsFontfileUbuntur{}}
\newcommand{\ncr}[1]{{\mktsFontfileUbuntur#1}}
\newcommand{\gloss}[1]{{\mktsFontfileEbgaramondtwelveregular#1}}
% ..........................................................................................................
% \XeTeXlinebreaklocale "ja"% for Japanese
% \XeTeXlinebreakskip 0pt plus 0.1pt% sets the skip
% }
\renewcommand{\cjkgGlue}{\hskip 0mm plus 0.7mm minus 0.0mm}
% \renewcommand{\cjkgGlue}{{\makebox[0mm]{\color{red}|}}\hskip 0mm plus 0.7mm minus 0.0mm}
\newcommand{\mktsCjkBase}{%
  \cjkgUseCjkGlue%
  \cjkgGlue%
  \mktsScaleFontRelative{1.1}%
  \special{pdf:literal 1 0 0 1 0 -1.5 cm}%
  \AfterGroup{\special{pdf:literal 1 0 0 1 0 1.5 cm}\cjkgGlue}%
  }
\newcommand{\cjk}{\mktsCjkBase}%
% \newcommand{\cn}{\mktsStartCjk\mktsFontfileSunexta}
\newcommand{\cn}{\cjkgGlue\mktsStyleFontCjkDefault\AfterGroup{\cjkgGlue}}
\newcommand{\mktsRsgFb}{\cjkgGlue\mktsFontfileSunexta\AfterGroup{\cjkgGlue}}
\newcommand{\cnxa}{\cjkgGlue\mktsFontfileSunexta\AfterGroup{\cjkgGlue}}
\newcommand{\cnxb}{\cjkgGlue\mktsFontfileSunflowerucjkxb\AfterGroup{\cjkgGlue}}
\newcommand{\cnxc}{\cjkgGlue\mktsFontfileHanaminb\AfterGroup{\cjkgGlue}}
% \newcommand{\cnxc}{\cjkgGlue\mktsFontfileSunextb\AfterGroup{\cjkgGlue}}
% \newcommand{\cnxc}{\cjkgGlue\mktsFontfileSunflowerucjkxb\AfterGroup{\cjkgGlue}}
\newcommand{\cnxd}{\cjkgGlue\mktsFontfileBabelstonehan\AfterGroup{\cjkgGlue}}
\newcommand{\cncone}{\cjkgGlue\mktsFontfileSunexta\AfterGroup{\cjkgGlue}}       % CJK Compatibility 1
\newcommand{\cnctwo}{\cjkgGlue\mktsFontfileHanamina\AfterGroup{\cjkgGlue}}          % CJK Compatibility 2
\newcommand{\cnrone}{\cjkgGlue\mktsFontfileSunexta\AfterGroup{\cjkgGlue}}       % CJK Radicals 1
\newcommand{\cnrtwo}{\cjkgGlue\mktsFontfileSunexta\AfterGroup{\cjkgGlue}}       % CJK Radicals 2
\newcommand{\cnsym}{\cjkgGlue\mktsFontfileHanamina\AfterGroup{\cjkgGlue}}
\newcommand{\cnstrk}{\cjkgGlue\mktsFontfileSunexta\AfterGroup{\cjkgGlue}}
% ..........................................................................................................
\newcommand{\cnxBabel}{\cjkgGlue\mktsFontfileBabelstonehan\AfterGroup{\cjkgGlue}}
\newcommand{\cnxHanaA}{\cjkgGlue\mktsFontfileHanamina\AfterGroup{\cjkgGlue}}
\newcommand{\cnxHanaB}{\cjkgGlue\mktsFontfileHanaminb\AfterGroup{\cjkgGlue}}
\newcommand{\cnxSunXA}{\cjkgGlue\mktsFontfileSunexta\AfterGroup{\cjkgGlue}}
\newcommand{\cnxUming}{\cjkgGlue\mktsFontfileUming\AfterGroup{\cjkgGlue}}
% ..........................................................................................................
\newcommand{\cnjzr}{%
  % \cn%
  \cjkgGlue%
  \mktsFontfileJizurathreeb%
  \AfterGroup{\cjkgGlue}%
  % \mktsScaleFont{1.1}
  }%
\newcommand{\cnxJzr}{\cnjzr}
% \newcommand{\missing}[1]{{\missingFont#1}}
% ..........................................................................................................
% ### TAINT should use single kana definition and differentiate between hiragana, katakan only iff and where
% necessary; should *not* use font filename here but symbolic name ###
\newcommand{\ka}{%
  \cjkgGlue%
  % \renewcommand{\cjkgGlue}{\hskip -0.05ex plus 0.05ex minus 0.05ex}%
  % \mktsStyleFontKanaCurrent%
  \mktsStyleFontCjkDefault%
  \AfterGroup{\cjkgGlue}%
  }%

% \newcommand{\ka}{%
%   % \special{pdf:literal 1 0 0 1 0 0.5 cm}%
%   % \mktsStyleFontKanaCurrent%
%   % \mktsScaleFont{1.2523}%
%   % \AfterGroup{\special{pdf:literal 1 0 0 1 0 -0.5 cm}}%
%   }
\newcommand{\hi}{\ka}

% \newcommand{\hi}{%
%   \special{pdf:literal 1 0 0 1 0 0.5 cm}%
%   \mktsFontfileFandolfangregular%
%   % \mktsScaleFont{1.2523}%
%   \AfterGroup{\special{pdf:literal 1 0 0 1 0 -0.5 cm}}%
%   }

% \newcommand{\xxxFoo}{0.75}
% \pgfmathsetmacro{\xxxBar}{0.9 * \xxxFoo}
% \pgfmathsetmacro{\xxxBaz}{0.5 * 3}
  % \mktsScaleFont{\xxxBar}%

\newcommand{\hg}{%
  % \special{pdf:literal 1 0 0 1 0 0.5 cm}%
  \mktsStyleFontHangeulDefault%
  \mktsScaleFont{1.15625}%
  % \AfterGroup{\special{pdf:literal 1 0 0 1 0 -0.5 cm}}%
  }
% ..........................................................................................................
\newcommand{\jzrStrokeclassZZWBF}{\prPushRaise{-0.1}{-0.1}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassVoid}{\prPushRaise{-0.1}{-0.1}{{\mktsFontfileSunexta{}　}}}
\newcommand{\jzrStrokeclassZero}{\prPushRaise{-0.1}{-0.1}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassOne}{\prPushRaise{-0.1}{-0.1}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassTwo}{\prPushRaise{-0.1}{-0.1}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassThree}{\prPushRaise{-0.1}{-0.1}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassFour}{\prPushRaise{-0.1}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassFive}{\prPushRaise{-0.1}{-0.1}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassLeftHook}{\prPushRaise{-0.1}{-0.1}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassRightHook}{\prPushRaise{-0.1}{-0.1}{{\mktsFontfileJizurathreeb{}}}}
% ..........................................................................................................
\newcommand{\jzrStrokeclassTextZZWBF}{\prPushRaise{0}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassTextOne}{\prPushRaise{0}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassTextTwo}{\prPushRaise{0}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassTextTwoHook}{\prPushRaise{0}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassTextThree}{\prPushRaise{0}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassTextFour}{\prPushRaise{0}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassTextFourSlant}{\prPushRaise{0}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassTextFive}{\prPushRaise{0}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassTextLeftHook}{\prPushRaise{0}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
\newcommand{\jzrStrokeclassTextRightHook}{\prPushRaise{0}{-0.15}{{\mktsFontfileJizurathreeb{}}}}
% ..........................................................................................................
\newcommand{\kai}{\renewcommand{\mktsStyleFontCjkDefault}{\mktsFontfileBiaukai}}
\newcommand{\jzrkai}[1]{{\mktsFontfileJizurathreeb{}#1}}
% ..........................................................................................................
% \newcommand{\pageNr}[1]{{\fontsize{2.5mm}{2.5mm}\mktsFontfilePtsans#1}}
% \newcommand{\sfncr}[1]{{\fontsize{2mm}{2mm}\jzrFontInputMonoCompressedLight#1}}
% \newcommand{\wbf}[1]{{\fontsize{2mm}{2mm}\mktsFontfileIosevkaslabbold#1}}
% \newcommand{\pageNrText}[1]{{\fontsize{3mm}{5mm}\mktsFontfilePtsans#1}}
% \newcommand{\wbfText}[1]{{\fontsize{3mm}{5mm}\jzrFontInputMonoCompressedMedium#1}}


% ### TAINT should only be loaded when needed ###
\usepackage{struktex}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, arrows}
\tikzstyle{startstop} = [rectangle, rounded corners, minimum width=3cm, minimum height=1cm,text centered, draw=black, fill=red!30]
\tikzstyle{io} = [trapezium, trapezium left angle=70, trapezium right angle=110, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=blue!30]
\tikzstyle{process} = [rectangle, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=orange!30]
\tikzstyle{decision} = [diamond, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=green!30]
\tikzstyle{arrow} = [thick,->,>=stealth]


% ----------------------------------------------------------------------------------
% ##################################################################################
% ==================================================================================

% DECORATIONS (should got into module of their own)

% ==================================================================================
% ##################################################################################
% ----------------------------------------------------------------------------------


\usepackage{adjustbox}
\definecolor{jzrBlue}{RGB}{0,94,129}
\definecolor{jzrDarkBlue}{RGB}{0,60,110}

\newdimen\myFontsize
\setlength{\myFontsize}{5mm}
\newdimen\kwicwrapStrutWidth
\newdimen\kwicwrapStrutDoubleTopLength
\newdimen\kwicwrapStrutDoubleTopHeight
\newdimen\kwicwrapStrutDoubleTopDepth
\setlength{\kwicwrapStrutDoubleTopLength}{2.85\myFontsize}
% \setlength{\kwicwrapStrutDoubleTopLength}{2.4\myFontsize-0.155mm}
\setlength{\kwicwrapStrutDoubleTopHeight}{0.5\kwicwrapStrutDoubleTopLength}
\setlength{\kwicwrapStrutDoubleTopDepth}{\kwicwrapStrutDoubleTopLength-\kwicwrapStrutDoubleTopHeight}
% ..........................................................................................................
\kwicwrapStrutWidth=0mm
\newcommand{\kwicwrapStrutDoubleTop}{{\color{blue}\vrule height\kwicwrapStrutDoubleTopHeight width\kwicwrapStrutWidth depth\kwicwrapStrutDoubleTopDepth}}
\newdimen\kwicwrapStrutCircleLength
\newdimen\kwicwrapStrutCircleHeight
\newdimen\kwicwrapStrutCircleDepth
\newdimen\kwicwrapStrutCircleFontsize
\setlength{\kwicwrapStrutCircleLength}{1.25\myFontsize}
\setlength{\kwicwrapStrutCircleHeight}{0.7\kwicwrapStrutCircleLength}
\setlength{\kwicwrapStrutCircleDepth}{\kwicwrapStrutCircleLength-\kwicwrapStrutCircleHeight}
\setlength{\kwicwrapStrutCircleFontsize}{1.0\kwicwrapStrutCircleLength}
%\newcommand{\kwicwrapStrutCircle}{{\color{blue}\vrule height\kwicwrapStrutCircleHeight width\kwicwrapStrutWidth depth\kwicwrapStrutCircleDepth}}
\newcommand{\kwicwrapStrutCircle}{\vrule %
  height\kwicwrapStrutCircleHeight %
  width\kwicwrapStrutWidth %
  depth\kwicwrapStrutCircleDepth}
\newcommand*\kwicwrapCircledInner[1]{%
  \makebox[12.5mm]{\kwicwrapStrutDoubleTop\smash{%
  \begin{adjustbox}{trim=-2.25mm 0mm 0mm 0}%
  % \begin{adjustbox}{trim=8.5mm 0mm 0mm 0}%
    \tikz[baseline=(char.base),line width=0.5mm]{%
      \node[shape=circle,draw,inner sep=0.55mm,jzrDarkBlue,fill=jzrBlue] (char) {%
      \makebox[\kwicwrapStrutCircleLength]{\kwicwrapStrutCircle\smash{{%
        \color{white}%
        \prPushRaise{0.03}{-0.3}{#1}}%
        }}}%
  ;}%
  \end{adjustbox}%
  }}}

% ### TAINT parametrize font scaling factor
\newcommand*\kwicwrapCircled[1]{%
  \kwicwrapCircledInner{\mktsScaleFontRelative{2}#1}}%


% \newcommand{\mktsXxxxstrut}[1]{{%
%   \color{blue}%
%   \rule[0mm]{1mm}{#1\mktsLineheight}%
%   }}

% ----------------------------------------------------------------------------------------------------------
\usepackage[usestackEOL]{stackengine}

% ----------------------------------------------------------------------------------------------------------
\newcommand{\mktsFncrStacked}[3]{{%
  \smash{%
    \thinspace%
    \mbox{%
      \prRaise{-0.25}{%
        \mktsStyleFncr%
        \mktsScaleFontRelative{0.7}%
        \setstackgap{L}{\mktsCurrentFontsize}%
        \Longstack{#1\\#2}}}%
  \thinspace\mktsStyleFncr{}#3}}}%

% ----------------------------------------------------------------------------------------------------------
\newcommand{\mktsFncr}[3]{{%
  \mktsScaleFont{0.8}%
  {\mktsFontfileIosevkatermslabbold#1+#3}%
  \thinspace%
  {\prRaise{-0.2}{\mktsScaleFont{0.5}\mktsFontfileIosevkatermslabmediumitalic#2}}%
  \thinspace%
  }}%

% ----------------------------------------------------------------------------------------------------------
\usepackage{refcount}
% usage:
%   \label{foobarone}
%   ...
%   \mktsPagerefCompare{foobarone}{<}{=}{>}
% chooses one of the arguments based on comparinf current page with page where label occurs
\newcommand{\mktsPagerefCompare}[4]{%
  \ifnumequal{\getpagerefnumber{#1}}{\thepage}{#3}{%
    \ifnumless{\getpagerefnumber{#1}}{\thepage}{#2}{#4}}}%

% ----------------------------------------------------------------------------------------------------------
% like `\mktsPagerefCompare`, chooses style, spacing, appropriate arrow; prints prefix and pagenr
\newcommand{\mktsPagerefArrow}[1]{{%
  \mktsStylePagenr{\mktsFontfileIosevkatermslabbold\mktsPagerefCompare{#1}{↑}{↕}{↓}}\thinspace{}p\thinspace\getpagerefnumber{#1}}}%

% ----------------------------------------------------------------------------------------------------------
% ### TAINT using absolute, direct dimensions instead of relative, symbolic ones
\newcommand{\jzrStrokeclassCircled}[1]{%
  \makebox[4mm]{%
    \makebox[0mm]{{%
      \mktsScaleFont{0.8}%
      \prPushRaise{-0.1}{+0.05}{\mktsFontfileJizurathreeb{}#1}}}%
    \makebox[0mm]{{%
      \mktsScaleFont{1.25}%
      \prPushRaise{-0.1}{-0.1}{\mktsFontfileJizurathreeb{}}}}%
      }}%

% ----------------------------------------------------------------------------------------------------------
% ### TAINT using absolute, direct dimensions instead of relative, symbolic ones
\newcommand{\jzrStrokeclassCircledSingle}{%
  \makebox[4mm]{%
    \makebox[0mm]{{%
      \mktsScaleFont{1.25}%
      \prPushRaise{-0.1}{-0.1}{\mktsFontfileJizurathreeb{}}}}%
      }}%

% ----------------------------------------------------------------------------------------------------------
% ### TAINT using absolute, direct dimensions instead of relative, symbolic ones
\newcommand{\jzrStrokeclassCircledZero}[1]{%
  \makebox[4mm]{%
    \makebox[0mm]{{%
      \mktsScaleFont{1.25}%
      \prPushRaise{-0.1}{-0.1}{\mktsFontfileJizurathreeb{}}}}%
      }}%

% ----------------------------------------------------------------------------------------------------------
% ### TAINT using absolute, direct dimensions instead of relative, symbolic ones
\newcommand{\mktsCircledLetter}[1]{%
  \makebox[4mm]{%
    \makebox[0mm]{{%
      \mktsScaleFont{0.8}%
      \prPushRaise{-0.1}{-0.05}{\mktsStyleFontCode{}#1}}}%
    \makebox[0mm]{{%
      \mktsScaleFont{1.25}%
      \prPushRaise{-0.1}{-0.15}{\mktsFontfileJizurathreeb{}}}}%
      }}%

% ----------------------------------------------------------------------------------------------------------
% ### TAINT using absolute, direct dimensions instead of relative, symbolic ones
\newcommand{\mktsBoxedLetter}[1]{%
  \makebox[4mm]{%
    \makebox[0mm]{{%
      \mktsScaleFont{0.8}%
      \prPushRaise{-0.1}{-0.05}{\mktsStyleFontCode{}#1}}}%
    \makebox[0mm]{{%
      \mktsScaleFont{1.25}%
      \prPushRaise{-0.1}{-0.18}{\mktsFontfileSourcehansansbold{}□}}}%
      }}%

% ### TAINT using absolute, direct dimensions instead of relative, symbolic ones
\newcommand{\jzrStrokeclassCircledVoid}{\makebox[4mm]}%
\newcommand{\jzrStrokeclassCircledTest}{\jzrStrokeclassCircled{}}%
\newcommand{\jzrStrokeclassCircledOne}{\jzrStrokeclassCircled{}}%
\newcommand{\jzrStrokeclassCircledTwo}{\jzrStrokeclassCircled{}}%
\newcommand{\jzrStrokeclassCircledThree}{\jzrStrokeclassCircled{}}%
\newcommand{\jzrStrokeclassCircledFour}{\jzrStrokeclassCircled{}}%
\newcommand{\jzrStrokeclassCircledFive}{\jzrStrokeclassCircled{}}%

% ----------------------------------------------------------------------------------------------------------
\newcommand{\mktsBoxedGlyph}[1]{%
  \thinspace\setlength{\fboxsep}{0.1mm}%
  \prRaise{-0.3}{%
    \fbox{\prRaise{0.35}{%
      #1}}}}%

% ----------------------------------------------------------------------------------------------------------
\newcommand{\mktsIndent}{{\mktsStyleFontCjkDefault{}^^^^3000}}%








